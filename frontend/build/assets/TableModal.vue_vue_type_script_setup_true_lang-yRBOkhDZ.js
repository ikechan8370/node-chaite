import{d as G,hN as N,r as p,bd as K,x as S,b as H,o as I,K as J,u as a,i as O,w as n,e as t,z as Q,E as W,g as r,A as X,L as Y,B as Z}from"./index-CucaxZT9.js";import{b as h}from"./system-BNhblR12.js";import{N as ee}from"./Grid-KISfveeX.js";import{_ as te}from"./FormItemGridItem-Dp7BRbUe.js";import{_ as ae}from"./RadioGroup-B2AZpoS6.js";import{_ as ne}from"./Radio-RTfkllD3.js";import{_ as oe}from"./FormItem-Dc6zS2Y0.js";const pe=G({__name:"TableModal",props:{modalName:{default:""}},emits:["open","close"],setup(k,{expose:M,emit:x}){const _=x,{bool:m,setTrue:T,setFalse:U}=N(!1),{bool:L,setTrue:R,setFalse:B}=N(!1),f={userName:"",email:"",tel:"",role:[],status:1},o=p({...f}),i=K("add"),$=S(()=>`${{add:"添加",view:"查看",edit:"编辑"}[i.value]}${k.modalName}`);async function C(s="add",e){_("open"),i.value=s,T(),P(),await{async add(){o.value={...f}},async view(){e&&(o.value={...e})},async edit(){e&&(o.value={...e})}}[s]()}function c(){U(),B(),_("close")}M({openModal:C});const v=p();async function V(){const s={async add(){return new Promise(e=>{setTimeout(()=>{window.$message.success("模拟新增成功"),e(!0)},2e3)})},async edit(){return new Promise(e=>{setTimeout(()=>{window.$message.success("模拟编辑成功"),e(!0)},2e3)})},async view(){return!0}};await v.value?.validate(),R(),await s[i.value]()&&c()}const F={userName:{required:!0,message:"请输入用户名",trigger:"blur"}},g=p();async function P(){const{data:s}=await h();g.value=s}return(s,e)=>{const d=Q,u=te,b=ne,w=W,j=ae,q=X,z=Y,A=ee,D=oe,y=Z,E=J;return I(),H(E,{show:a(m),"onUpdate:show":e[7]||(e[7]=l=>O(m)?m.value=l:null),"mask-closable":!1,preset:"card",title:a($),class:"w-700px",segmented:{content:!0,action:!0}},{action:n(()=>[t(w,{justify:"center"},{default:n(()=>[t(y,{onClick:c},{default:n(()=>e[12]||(e[12]=[r(" 取消 ")])),_:1}),t(y,{type:"primary",loading:a(L),onClick:V},{default:n(()=>e[13]||(e[13]=[r(" 提交 ")])),_:1},8,["loading"])]),_:1})]),default:n(()=>[t(D,{ref_key:"formRef",ref:v,rules:F,"label-placement":"left",model:a(o),"label-width":100,disabled:a(i)==="view"},{default:n(()=>[t(A,{cols:2,"x-gap":18},{default:n(()=>[t(u,{span:1,label:"用户名",path:"userName"},{default:n(()=>[t(d,{value:a(o).userName,"onUpdate:value":e[0]||(e[0]=l=>a(o).userName=l)},null,8,["value"])]),_:1}),t(u,{span:1,label:"性别",path:"gender"},{default:n(()=>[t(j,{value:a(o).gender,"onUpdate:value":e[1]||(e[1]=l=>a(o).gender=l)},{default:n(()=>[t(w,null,{default:n(()=>[t(b,{value:1},{default:n(()=>e[8]||(e[8]=[r(" 男 ")])),_:1}),t(b,{value:0},{default:n(()=>e[9]||(e[9]=[r(" 女 ")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(u,{span:1,label:"邮箱",path:"email"},{default:n(()=>[t(d,{value:a(o).email,"onUpdate:value":e[2]||(e[2]=l=>a(o).email=l)},null,8,["value"])]),_:1}),t(u,{span:1,label:"联系方式",path:"tel"},{default:n(()=>[t(d,{value:a(o).tel,"onUpdate:value":e[3]||(e[3]=l=>a(o).tel=l)},null,8,["value"])]),_:1}),t(u,{span:2,label:"角色",path:"role"},{default:n(()=>[t(q,{value:a(o).role,"onUpdate:value":e[4]||(e[4]=l=>a(o).role=l),multiple:"",filterable:"","label-field":"role","value-field":"id",options:a(g)},null,8,["value","options"])]),_:1}),t(u,{span:2,label:"备注",path:"remark"},{default:n(()=>[t(d,{value:a(o).remark,"onUpdate:value":e[5]||(e[5]=l=>a(o).remark=l),type:"textarea"},null,8,["value"])]),_:1}),t(u,{span:1,label:"用户状态",path:"status"},{default:n(()=>[t(z,{value:a(o).status,"onUpdate:value":e[6]||(e[6]=l=>a(o).status=l),"checked-value":1,"unchecked-value":0},{checked:n(()=>e[10]||(e[10]=[r(" 启用 ")])),unchecked:n(()=>e[11]||(e[11]=[r(" 禁用 ")])),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["show","title"])}}});export{pe as _};
