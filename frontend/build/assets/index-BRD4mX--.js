import{_ as F,a as G}from"./add-one-8AM-ZTV3.js";import{d as V,am as A,an as C,r as p,F as R,b as U,o as q,w as n,e as t,ac as D,u as a,ah as L,ao as j,B as u,g as y,ap as E,aq as H,ad as P,a as K,x as m}from"./index-BjEaegUP.js";import{f as Q,c as W,u as X,a as Y}from"./processors-DevYoRzT.js";import{_ as Z}from"./ProcessorFormModal.vue_vue_type_script_setup_true_lang-Dp8X1yCo.js";import{_ as ee}from"./FormItem-CbOKjIWi.js";import{N as te,_ as ne}from"./Grid-o2FxrQJs.js";import{_ as oe}from"./FormItemGridItem-CSIse2iU.js";import"./Checkbox-CirA8Os6.js";import"./Ellipsis-BscbUQ8T.js";import"./prop-BjyUHhTu.js";import"./index-CYcWqdD7.js";const ae={class:"flex gap-4"},ge=V({__name:"index",setup(se){function b({upload:o,edit:e,remove:g}){return[{title:"ID",key:"id",resizable:!0},{title:"名称",key:"name",render(l){return m("div",{},l.name)},resizable:!0},{title:"类型",key:"type",width:100},{title:"描述",key:"description",width:500},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(l){return[m(u,{type:"primary",strong:!0,tertiary:!0,size:"small",onClick:()=>o(l)},{default:()=>"上传"}),m(u,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(l)},{default:()=>"修改"}),m(u,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>g(l)},{default:()=>"删除"})]}}]}const f=A(),k=C({value:[]}),c=p(!1),d=p(!1),h={modelType:"settings",name:"",code:"",description:"",uploader:void 0},v=p(JSON.parse(JSON.stringify(h))),s=p(!1);function r(o){s.value=!0,Q(o).then(e=>{k.value=e.data,s.value=!1}).catch(()=>{s.value=!1})}function x(o){window.$dialog.warning({title:"确认删除",content:`确定要删除处理器 "${o.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{Y(o.id).then(e=>{e.code===0&&(f.success("删除成功"),r())}).finally(()=>s.value=!1)}})}function w(o){s.value=!0,W(o).then(e=>{e.code===0&&(f.success(d.value?"修改成功":"创建成功"),r())}).finally(()=>{s.value=!1,c.value=!1})}const z=b({upload(o){X(o).then(e=>{e.code===0&&(f.success("上传成功"),r())})},edit(o){d.value=!0,v.value={...o},c.value=!0},remove:x});function S(){d.value=!1,v.value=JSON.parse(JSON.stringify(h)),c.value=!0}R(()=>{r()});const i=C({name:void 0});function B(){i.name=void 0,r(i)}return(o,e)=>{const g=L,l=oe,M=E,I=H,J=ne,O=ee,N=D,T=F,$=G;return q(),U(a(P),{vertical:"",size:"large"},{default:n(()=>[t(N,null,{default:n(()=>[t(O,{model:i,"label-placement":"left",inline:"","show-feedback":!1},{default:n(()=>[t(a(te),{cols:"1 s:2 m:3 l:6","x-gap":12,"y-gap":16,responsive:"screen","item-responsive":""},{default:n(()=>[t(l,{span:"1",label:"名称",path:"name"},{default:n(()=>[t(g,{value:i.name,"onUpdate:value":e[0]||(e[0]=_=>i.name=_),placeholder:"请输入要搜索的名称关键词"},null,8,["value"])]),_:1}),t(J,{span:"1"},{default:n(()=>[t(a(j),{class:"ml-auto"},{default:n(()=>[t(a(u),{type:"primary",onClick:e[1]||(e[1]=_=>r(i))},{icon:n(()=>[t(M)]),default:n(()=>[e[3]||(e[3]=y(" 搜索 "))]),_:1}),t(a(u),{strong:"",secondary:"",onClick:B},{icon:n(()=>[t(I)]),default:n(()=>[e[4]||(e[4]=y(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(N,null,{default:n(()=>[t(a(P),{vertical:"",size:"large"},{default:n(()=>[K("div",ae,[t(a(u),{type:"primary",onClick:S},{icon:n(()=>[t(T)]),default:n(()=>[e[5]||(e[5]=y(" 新建处理器 "))]),_:1})]),t($,{columns:a(z),data:k.value,loading:s.value},null,8,["columns","data","loading"])]),_:1})]),_:1}),t(Z,{show:c.value,"onUpdate:show":e[2]||(e[2]=_=>c.value=_),"edit-mode":d.value,"initial-data":v.value,onSubmit:w},null,8,["show","edit-mode","initial-data"])]),_:1})}}});export{ge as default};
