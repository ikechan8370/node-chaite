import{_ as te,a as ae}from"./add-one-CaVNR016.js";import{p as w,d as oe,q as ne,s as z,r as i,v as le,b as se,o as ie,w as o,e as t,y as ue,u as l,z as re,N as de,B as u,g as h,C as ce,D as pe,S as _e,U as me,E as S,a as U,F as s,H as A,G as fe}from"./index-BerDumZT.js";import{_ as ve}from"./ToolFormModal.vue_vue_type_script_setup_true_lang-Xa-5ICmq.js";import{f as ge,c as ye,d as ke}from"./toolGroup-ChX0qXu3.js";import{_ as be}from"./ToolGroupFormModal.vue_vue_type_script_setup_true_lang-C5WHJGwd.js";import{_ as he}from"./FormItem-DPe3OX-i.js";import{N as Te,_ as Ne,a as Ce}from"./Grid-DIE8y2Et.js";import"./Checkbox-DF4_xZPC.js";import"./prop-BjyUHhTu.js";import"./index-BkoQyK-6.js";function Ge(p){return w.Get("/api/tools/list",{params:p})}function ze(p){return w.Post("/api/tools/",p)}function Se(p){return w.Delete(`/api/tools/${p}`)}const we={class:"flex gap-4"},xe={class:"flex gap-4"},Fe=oe({__name:"index",setup(p){function P({test:a,edit:e,remove:y}){return[{title:"ID",key:"id",resizable:!0},{title:"名称",key:"name",render(n){return s("div",{},n.name)},resizable:!0},{title:"状态",key:"status",render(n){return n.status==="disabled"?s(fe,{trigger:"hover"},{trigger:s(A,{type:"error"},{default:()=>"禁用"}),default:()=>"已禁用，不会被任何工具组使用"}):s(A,{type:"success"},{default:()=>"正常"})}},{title:"描述",key:"description",width:500},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(n){return[s(u,{type:"primary",strong:!0,tertiary:!0,size:"small",onClick:()=>a(n)},{default:()=>"测试"}),s(u,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(n)},{default:()=>"修改"}),s(u,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>y(n)},{default:()=>"删除"})]}}]}function F({_view:a,edit:e,remove:y}){return[{title:"ID",key:"id",resizable:!0},{title:"组名称",key:"name",render(n){return s("div",{},n.name)},resizable:!0},{title:"描述",key:"description",width:500},{title:"工具数量",key:"toolCount",render(n){return s("div",{},n.isDefault?"-":n.toolIds?.length||0)}},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(n){return[s(u,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(n),disabled:n.isDefault},{default:()=>"修改"}),s(u,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>y(n),disabled:n.isDefault},{default:()=>"删除"})]}}]}const m=ne(),T=z({value:[]}),f=i(!1),k=i(!1),x={modelType:"settings",name:"",code:"",description:"",uploader:void 0},N=i(JSON.parse(JSON.stringify(x))),c=i(!1),D=z({value:[]}),v=i(!1),b=i(!1),J={name:"",description:"",toolIds:[],modelType:"settings",embedded:!1},C=i(JSON.parse(JSON.stringify(J))),r=i(!1),O=i("tools");function g(a){c.value=!0,Ge(a).then(e=>{T.value=e.data,c.value=!1}).catch(()=>{c.value=!1})}function L(a){window.$dialog.warning({title:"确认删除",content:`确定要删除工具 "${a.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{Se(a.id).then(e=>{e.code===0&&(m.success("删除成功"),g())}).finally(()=>c.value=!1)}})}function R(a){c.value=!0,ze(a).then(e=>{e.code===0&&(m.success(k.value?"修改成功":"创建成功"),g())}).finally(()=>{c.value=!1,f.value=!1})}const V=P({test(a){m.warning("暂未实现")},edit(a){k.value=!0,N.value={...a},f.value=!0},remove:L});function q(){k.value=!1,N.value=JSON.parse(JSON.stringify(x)),f.value=!0}function G(a){r.value=!0,ge(a).then(e=>{D.value=e.data,r.value=!1}).catch(()=>{r.value=!1})}function E(a){window.$dialog.warning({title:"确认删除",content:`确定要删除工具组 "${a.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{r.value=!0,ke(a.id).then(e=>{e.code===0&&(m.success("删除成功"),G())}).finally(()=>r.value=!1)}})}function H(a){r.value=!0,ye(a).then(e=>{e.code===0&&(m.success(b.value?"修改成功":"创建成功"),G())}).finally(()=>{r.value=!1,v.value=!1})}const j=F({edit(a){b.value=!0,C.value={...a},v.value=!0},remove:E});function K(){b.value=!1,C.value=JSON.parse(JSON.stringify(J)),v.value=!0}le(()=>{g(),G()});const _=z({name:void 0});function Q(){_.name=void 0,g(_)}return(a,e)=>{const y=re,n=Ne,W=ce,X=pe,Y=Ce,Z=he,$=ue,I=te,M=ae,B=me,ee=_e;return ie(),se(l(S),{vertical:"",size:"large"},{default:o(()=>[t($,null,{default:o(()=>[t(Z,{model:_,"label-placement":"left",inline:"","show-feedback":!1},{default:o(()=>[t(l(Te),{cols:"1 s:2 m:3 l:6","x-gap":12,"y-gap":16,responsive:"screen","item-responsive":""},{default:o(()=>[t(n,{span:"1",label:"名称",path:"name"},{default:o(()=>[t(y,{value:_.name,"onUpdate:value":e[0]||(e[0]=d=>_.name=d),placeholder:"请输入要搜索的名称关键词"},null,8,["value"])]),_:1}),t(Y,{span:"1"},{default:o(()=>[t(l(de),{class:"ml-auto"},{default:o(()=>[t(l(u),{type:"primary",onClick:e[1]||(e[1]=d=>g(_))},{icon:o(()=>[t(W)]),default:o(()=>[e[5]||(e[5]=h(" 搜索 "))]),_:1}),t(l(u),{strong:"",secondary:"",onClick:Q},{icon:o(()=>[t(X)]),default:o(()=>[e[6]||(e[6]=h(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t($,null,{default:o(()=>[t(ee,{value:O.value,"onUpdate:value":e[2]||(e[2]=d=>O.value=d),type:"line",animated:""},{default:o(()=>[t(B,{name:"tools",tab:"工具管理"},{default:o(()=>[t(l(S),{vertical:"",size:"large"},{default:o(()=>[U("div",we,[t(l(u),{type:"primary",onClick:q},{icon:o(()=>[t(I)]),default:o(()=>[e[7]||(e[7]=h(" 新建工具 "))]),_:1})]),t(M,{columns:l(V),data:T.value,loading:c.value},null,8,["columns","data","loading"])]),_:1})]),_:1}),t(B,{name:"groups",tab:"工具组管理"},{default:o(()=>[t(l(S),{vertical:"",size:"large"},{default:o(()=>[U("div",xe,[t(l(u),{type:"primary",onClick:K},{icon:o(()=>[t(I)]),default:o(()=>[e[8]||(e[8]=h(" 新建工具组 "))]),_:1})]),t(M,{columns:l(j),data:D.value,loading:r.value},null,8,["columns","data","loading"])]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(ve,{show:f.value,"onUpdate:show":e[3]||(e[3]=d=>f.value=d),"edit-mode":k.value,"initial-data":N.value,onSubmit:R},null,8,["show","edit-mode","initial-data"]),t(be,{show:v.value,"onUpdate:show":e[4]||(e[4]=d=>v.value=d),"edit-mode":b.value,"initial-data":C.value,"available-tools":T.value,onSubmit:H},null,8,["show","edit-mode","initial-data","available-tools"])]),_:1})}}});export{Fe as default};
