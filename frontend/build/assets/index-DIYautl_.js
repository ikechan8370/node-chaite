import{_ as V,a as q}from"./add-one-C5dKyyWA.js";import{p as N,d as A,q as P,s as b,r as m,v as R,b as U,o as E,w as n,e as t,y as L,u as a,z as j,N as H,B as r,g as k,C as K,D as Q,E as x,a as W,F as f}from"./index-DZraatOt.js";import{_ as X}from"./ToolFormModal.vue_vue_type_script_setup_true_lang-BdLIXTMA.js";import{_ as Y}from"./FormItem-CMLIekqh.js";import{N as Z,_ as ee,a as te}from"./Grid-DbT1yFGD.js";import"./Checkbox-Dvhll5Gk.js";import"./prop-BjyUHhTu.js";import"./monaco-editor-vue3-DsjxY-Sn.js";function ne(i){return N.Get("/api/tools/list",{params:i})}function oe(i){return N.Post("/api/tools/",i)}function ae(i){return N.Delete(`/api/tools/${i}`)}const le={class:"flex gap-4"},me=A({__name:"index",setup(i){function z({test:o,edit:e,remove:y}){return[{title:"ID",key:"id",resizable:!0},{title:"名称",key:"name",render(s){return f("div",{},s.name)},resizable:!0},{title:"描述",key:"description",width:500},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(s){return[f(r,{type:"primary",strong:!0,tertiary:!0,size:"small",onClick:()=>o(s)},{default:()=>"测试"}),f(r,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(s)},{default:()=>"修改"}),f(r,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>y(s)},{default:()=>"删除"})]}}]}const v=P(),h=b({value:[]}),c=m(!1),_=m(!1),T={modelType:"settings",name:"",code:"",description:"",uploader:void 0},g=m(JSON.parse(JSON.stringify(T))),l=m(!1);function d(o){l.value=!0,ne(o).then(e=>{h.value=e.data,l.value=!1}).catch(()=>{l.value=!1})}function w(o){window.$dialog.warning({title:"确认删除",content:`确定要删除工具 "${o.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{ae(o.id).then(e=>{e.code===0&&(v.success("删除成功"),d())}).finally(()=>l.value=!1)}})}function S(o){l.value=!0,oe(o).then(e=>{e.code===0&&(v.success(_.value?"修改成功":"创建成功"),d())}).finally(()=>{l.value=!1,c.value=!1})}const $=z({test(o){v.success(`测试工具: ${o.name}`)},edit(o){_.value=!0,g.value={...o},c.value=!0},remove:w});function B(){_.value=!1,g.value=JSON.parse(JSON.stringify(T)),c.value=!0}R(()=>{d()});const u=b({name:void 0});function M(){u.name=void 0,d(u)}return(o,e)=>{const y=j,s=ee,G=K,I=Q,J=te,O=Y,C=L,D=V,F=q;return E(),U(a(x),{vertical:"",size:"large"},{default:n(()=>[t(C,null,{default:n(()=>[t(O,{model:u,"label-placement":"left",inline:"","show-feedback":!1},{default:n(()=>[t(a(Z),{cols:"1 s:2 m:3 l:6","x-gap":12,"y-gap":16,responsive:"screen","item-responsive":""},{default:n(()=>[t(s,{span:"1",label:"名称",path:"name"},{default:n(()=>[t(y,{value:u.name,"onUpdate:value":e[0]||(e[0]=p=>u.name=p),placeholder:"请输入要搜索的名称关键词"},null,8,["value"])]),_:1}),t(J,{span:"1"},{default:n(()=>[t(a(H),{class:"ml-auto"},{default:n(()=>[t(a(r),{type:"primary",onClick:e[1]||(e[1]=p=>d(u))},{icon:n(()=>[t(G)]),default:n(()=>[e[3]||(e[3]=k(" 搜索 "))]),_:1}),t(a(r),{strong:"",secondary:"",onClick:M},{icon:n(()=>[t(I)]),default:n(()=>[e[4]||(e[4]=k(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(C,null,{default:n(()=>[t(a(x),{vertical:"",size:"large"},{default:n(()=>[W("div",le,[t(a(r),{type:"primary",onClick:B},{icon:n(()=>[t(D)]),default:n(()=>[e[5]||(e[5]=k(" 新建工具 "))]),_:1})]),t(F,{columns:a($),data:h.value,loading:l.value},null,8,["columns","data","loading"])]),_:1})]),_:1}),t(X,{show:c.value,"onUpdate:show":e[2]||(e[2]=p=>c.value=p),"edit-mode":_.value,"initial-data":g.value,onSubmit:S},null,8,["show","edit-mode","initial-data"])]),_:1})}}});export{me as default};
