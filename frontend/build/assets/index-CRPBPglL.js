import{m as L,c as h,o as k,a as o,X as Z,U as _,d as O,L as F,r as B,M as q,s as E,v as X,e as a,w as t,Y,i as S,u as l,t as N,Z as J,$ as C,y as p,C as U,E as i,V as x,g as w,F as Q,A as ee,a0 as I,B as R,z as le,p as W,k as ae}from"./index-ODYIy7Xh.js";import{f as te}from"./presets-BXoQisgH.js";import{_ as f}from"./FormItem-Bn6KO6SV.js";import{N as v}from"./Grid-Bjr6q9HT.js";import{_ as r}from"./FormItemGridItem-Ca-3zMXQ.js";import{N as c}from"./InputNumber-B7iAvbv4.js";import{N as m}from"./DynamicTags-QRruA4X5.js";import"./prop-BjyUHhTu.js";const se={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function ne(y,u){return k(),h("svg",se,u[0]||(u[0]=[o("path",{fill:"currentColor","fill-rule":"evenodd",d:"m16.871 33.044l-.873 11.66c-.062.82.667 1.383 1.318 1.018c4.613-2.584 19.062-12.074 26.386-32.932c.336-.957-.567-1.82-1.337-1.28c-4.326 3.03-13.78 9.29-19.623 10.484c0 0 3.742-2.6 5.981-6.588a1.2 1.2 0 0 0-.043-1.245L20.513 2.389c-.484-.697-1.478-.408-1.652.481l-2.543 12.937L4.384 26.223c-.598.522-.476 1.577.215 1.856zm21.104-4.596c-.756 1.055-2.384 3.224-3.887 4.55c-.3.265-.26.709.084.925l7.943 4.986c.478.3 1.123-.056 1.043-.576c-.37-2.383-1.434-7.351-4.125-9.959c-.3-.29-.819-.26-1.059.074","clip-rule":"evenodd"},null,-1)]))}const oe=L({name:"icon-park-outline-star-one",render:ne}),re={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function de(y,u){return k(),h("svg",re,u[0]||(u[0]=[o("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"4",d:"M18 6H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2Zm0 22H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Zm17-8a7 7 0 1 0 0-14a7 7 0 0 0 0 14Zm5 8H30a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Z"},null,-1)]))}const ue=L({name:"icon-park-outline-system",render:de}),ie={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function pe(y,u){return k(),h("svg",ie,u[0]||(u[0]=[Z('<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="4"><path stroke-linejoin="round" d="M20 10H6a2 2 0 0 0-2 2v26a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2v-2.5"></path><path d="M10 23h8m-8 8h24"></path><circle cx="34" cy="16" r="6" stroke-linejoin="round"></circle><path stroke-linejoin="round" d="M44 28.419C42.047 24.602 38 22 34 22s-5.993 1.133-8.05 3"></path></g>',1)]))}const me=L({name:"icon-park-outline-permissions",render:pe}),fe={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function ve(y,u){return k(),h("svg",fe,u[0]||(u[0]=[o("g",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"4"},[o("rect",{width:"24",height:"18",x:"12",y:"20",rx:"2"}),o("path",{"stroke-linecap":"round",d:"M18 20v-6c0-3.682 2.686-6 6-6c1.85 0 3.503.722 4.604 2a5.6 5.6 0 0 1 1.102 2M24 28v2M6 18v12m36-12v12"})],-1)]))}const be=L({name:"icon-park-outline-electronic-locks-open",render:ve});function ce(){return _.Get("/api/config/")}function ge(y){return _.Post("/api/config/",y)}const he={class:"config-container"},ke={class:"layout-container"},ye={class:"sidebar"},xe={class:"version-info"},we={class:"content-area"},Ue={class:"preset-map-container"},Pe={class:"preset-map-keyword-container"},Ce={class:"action-bar"},Le=O({__name:"index",setup(y){const u=F(),g=B("basic"),G=B(null);function P(d){return()=>W(I,null,{default:()=>W(d)})}const A=[{label:"基础设置",key:"basic",icon:P(ue)},{label:"模型与对话",key:"llm",icon:P(me)},{label:"权限管理",key:"management",icon:P(be)},{label:"Chaite配置",key:"chaite",icon:P(oe)}];function K(d){g.value=d}const s=q({version:"3.0.0",basic:{toggleMode:"at",togglePrefix:"#chat",debug:!1,commandPrefix:"^#chatgpt"},bym:{enable:!1,hit:["bym"],probability:.02,defaultPreset:"",presetPrefix:"",presetMap:[],maxTokens:0,temperature:-1,sendReasoning:!1},llm:{defaultModel:"",embeddingModel:"gemini-embedding-exp-03-07",dimensions:0,defaultChatPresetId:"",enableCustomPreset:!1,customPresetUserWhiteList:[],customPresetUserBlackList:[],promptBlockWords:[],responseBlockWords:[],blockStrategy:"full",blockWordMask:"**",enableGroupContext:!1,groupContextLength:20,groupContextTemplatePrefix:`Latest several messages in the group chat:
| sender.card | sender.nickname | sender.user_id | sender.role | sender.title | time | messageId | raw_message |
|---|---|---|---|---|---|---|---|`,groupContextTemplateMessage:"| ${message.sender.card} | ${message.sender.nickname} | ${message.sender.user_id} | ${message.sender.role} | ${message.sender.title} | ${message.time} | ${message.messageId} | ${message.raw_message} |",groupContextTemplateSuffix:`
`},management:{blackGroups:[],whiteGroups:[],blackUsers:[],whiteUsers:[],defaultRateLimit:0},chaite:{dataDir:"data",processorsDirPath:"utils/processors",toolsDirPath:"utils/tools",cloudBaseUrl:"",cloudApiKey:"",authKey:"",host:"",port:48370}});async function z(){const d=await ce();return d.isSuccess?u.success("配置保存成功"):u.error("配置保存失败"),Object.assign(s,d.data),Array.isArray(s.bym.presetMap)||(s.bym.presetMap=[]),d.data}async function V(){(await ge(s)).isSuccess?u.success("配置保存成功"):u.error("配置保存失败")}const T=B([]);function j(){te({}).then(d=>{T.value=d.data}).catch(d=>{console.error(d)})}const M=E(()=>T.value.map(d=>({label:d.name,value:d.id})));function $(d,e){return e.label.toLowerCase().includes(d.toLowerCase())}return X(async()=>{try{await z(),j()}catch(d){console.error("加载配置失败:",d),u.error("配置加载失败")}}),(d,e)=>{const H=Y;return k(),h("div",he,[a(l(p),{title:"系统配置",class:"main-card"},{default:t(()=>[o("div",ke,[o("div",ye,[a(H,{value:l(g),"onUpdate:value":[e[0]||(e[0]=n=>S(g)?g.value=n:null),K],options:A},null,8,["value"]),o("div",xe,[o("span",null,"版本: "+N(s.version),1)])]),o("div",we,[a(l(J),{ref_key:"tabsRef",ref:G,value:l(g),"onUpdate:value":e[42]||(e[42]=n=>S(g)?g.value=n:null),type:"line",animated:"",class:"responsive-tabs"},{default:t(()=>[a(l(C),{name:"basic",tab:"基础设置"},{default:t(()=>[a(l(p),{class:"inner-card"},{header:t(()=>e[43]||(e[43]=[o("div",{class:"card-header"},[o("div",{class:"card-header"},[o("div",{class:"card-title"}," 触发与命令 "),o("div",{class:"card-subtitle"}," 设置机器人的触发方式和基本命令 ")])],-1)])),default:t(()=>[a(l(f),{"label-placement":"left","label-width":"auto",model:s.basic},{default:t(()=>[a(l(v),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(r),{span:"24 s:24 m:12",label:"触发方式",path:"toggleMode"},{default:t(()=>[a(l(U),{value:s.basic.toggleMode,"onUpdate:value":e[1]||(e[1]=n=>s.basic.toggleMode=n),options:[{label:"@ 触发",value:"at"},{label:"前缀触发",value:"prefix"}]},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"触发前缀",path:"togglePrefix"},{default:t(()=>[a(l(i),{value:s.basic.togglePrefix,"onUpdate:value":e[2]||(e[2]=n=>s.basic.togglePrefix=n),placeholder:"仅前缀触发时有效",disabled:s.basic.toggleMode!=="prefix"},null,8,["value","disabled"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"命令前缀",path:"commandPrefix"},{default:t(()=>[a(l(i),{value:s.basic.commandPrefix,"onUpdate:value":e[3]||(e[3]=n=>s.basic.commandPrefix=n),placeholder:"例如: ^#chatgpt"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"调试模式",path:"debug"},{default:t(()=>[a(l(x),{value:s.basic.debug,"onUpdate:value":e[4]||(e[4]=n=>s.basic.debug=n)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),a(l(C),{name:"llm",tab:"模型与对话"},{default:t(()=>[a(l(p),{class:"inner-card mb-4"},{header:t(()=>e[44]||(e[44]=[o("div",{class:"card-header"},[o("div",{class:"card-title"}," 模型配置 "),o("div",{class:"card-subtitle"}," 设置默认使用的模型和嵌入模型 ")],-1)])),default:t(()=>[a(l(f),{"label-placement":"left","label-width":"auto",model:s.llm},{default:t(()=>[a(l(v),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(r),{span:"24 s:24 m:12",label:"嵌入模型",path:"embeddingModel"},{default:t(()=>[a(l(i),{value:s.llm.embeddingModel,"onUpdate:value":e[5]||(e[5]=n=>s.llm.embeddingModel=n),placeholder:"输入嵌入模型名称"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"嵌入维度",path:"dimensions"},{default:t(()=>[a(l(c),{value:s.llm.dimensions,"onUpdate:value":e[6]||(e[6]=n=>s.llm.dimensions=n),clearable:"",placeholder:"0表示自动",min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"默认对话预设",path:"defaultChatPresetId"},{default:t(()=>[a(l(U),{value:s.llm.defaultChatPresetId,"onUpdate:value":e[7]||(e[7]=n=>s.llm.defaultChatPresetId=n),options:l(M),filterable:"",placeholder:"选择默认对话预设",clearable:""},null,8,["value","options"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(p),{class:"inner-card mb-4"},{header:t(()=>e[45]||(e[45]=[o("div",{class:"card-header"},[o("div",{class:"card-title"}," 预设控制 "),o("div",{class:"card-subtitle"}," 设置用户预设切换权限 ")],-1)])),default:t(()=>[a(l(f),{"label-placement":"left","label-width":"auto",model:s.llm},{default:t(()=>[a(l(v),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(r),{span:"24 s:24 m:12",label:"允许切换预设",path:"enableCustomPreset"},{default:t(()=>[a(l(x),{value:s.llm.enableCustomPreset,"onUpdate:value":e[8]||(e[8]=n=>s.llm.enableCustomPreset=n)},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"预设白名单用户",path:"customPresetUserWhiteList"},{default:t(()=>[a(l(m),{value:s.llm.customPresetUserWhiteList,"onUpdate:value":e[9]||(e[9]=n=>s.llm.customPresetUserWhiteList=n),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"预设黑名单用户",path:"customPresetUserBlackList"},{default:t(()=>[a(l(m),{value:s.llm.customPresetUserBlackList,"onUpdate:value":e[10]||(e[10]=n=>s.llm.customPresetUserBlackList=n),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(p),{class:"inner-card"},{header:t(()=>e[46]||(e[46]=[o("div",{class:"card-header"},[o("div",{class:"card-title"}," 伪人模式 "),o("div",{class:"card-subtitle"}," 设置和管理伪人模式配置 ")],-1)])),default:t(()=>[a(l(f),{"label-placement":"left","label-width":"auto",model:s.bym},{default:t(()=>[a(l(v),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(r),{span:"24 s:24 m:12",label:"启用伪人模式",path:"enable"},{default:t(()=>[a(l(x),{value:s.bym.enable,"onUpdate:value":e[11]||(e[11]=n=>s.bym.enable=n)},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"伪人触发词",path:"hit","span-feedback":24},{feedback:t(()=>e[47]||(e[47]=[o("span",{class:"form-hint"},"包含这些词时将必定触发伪人模式",-1)])),default:t(()=>[a(l(m),{value:s.bym.hit,"onUpdate:value":e[12]||(e[12]=n=>s.bym.hit=n),placeholder:"输入触发词并按回车添加"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"随机触发概率",path:"probability","span-feedback":24},{feedback:t(()=>e[48]||(e[48]=[o("span",{class:"form-hint"},"不包含触发词时随机触发的概率",-1)])),default:t(()=>[a(l(c),{value:s.bym.probability,"onUpdate:value":e[13]||(e[13]=n=>s.bym.probability=n),min:0,max:1,step:.01,style:{width:"100%"}},{suffix:t(()=>[w(N((s.bym.probability*100).toFixed(0))+"% ",1)]),_:1},8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"默认预设",path:"defaultPreset","span-feedback":24},{feedback:t(()=>e[49]||(e[49]=[o("span",{class:"form-hint"},"伪人模式的默认预设",-1)])),default:t(()=>[a(l(U),{value:s.bym.defaultPreset,"onUpdate:value":e[14]||(e[14]=n=>s.bym.defaultPreset=n),options:l(M),filterable:"","filter-option":$,placeholder:"选择默认预设",clearable:""},null,8,["value","options"])]),_:1}),a(l(r),{span:"24",label:"预设前缀",path:"presetPrefix","span-feedback":24},{feedback:t(()=>e[50]||(e[50]=[o("span",{class:"form-hint"},"会加在所有伪人模式预设前的通用前缀，可用于配置通用的伪人发言风格",-1)])),default:t(()=>[a(l(i),{value:s.bym.presetPrefix,"onUpdate:value":e[15]||(e[15]=n=>s.bym.presetPrefix=n),type:"textarea",placeholder:"输入预设前缀",autosize:{minRows:3,maxRows:6}},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"最大Token数",path:"maxTokens","span-feedback":24},{feedback:t(()=>e[51]||(e[51]=[o("span",{class:"form-hint"},"大于0时会覆盖预设中的maxToken值",-1)])),default:t(()=>[a(l(c),{value:s.bym.maxTokens,"onUpdate:value":e[16]||(e[16]=n=>s.bym.maxTokens=n),min:0,placeholder:"0表示不限制",style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"温度",path:"temperature","span-feedback":24},{feedback:t(()=>e[52]||(e[52]=[o("span",{class:"form-hint"},"大于等于0时会覆盖预设中的temperature值，-1表示使用预设值",-1)])),default:t(()=>[a(l(c),{value:s.bym.temperature,"onUpdate:value":e[17]||(e[17]=n=>s.bym.temperature=n),min:-1,max:2,step:.1,placeholder:"-1表示使用预设值",style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"发送思考过程",path:"sendReasoning"},{default:t(()=>[a(l(x),{value:s.bym.sendReasoning,"onUpdate:value":e[18]||(e[18]=n=>s.bym.sendReasoning=n)},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"预设映射",path:"presetMap","span-feedback":24},{feedback:t(()=>e[58]||(e[58]=[o("span",{class:"form-hint"},"按优先级排序，消息包含特定关键词时使用对应的预设",-1)])),default:t(()=>[o("div",Ue,[(k(!0),h(Q,null,ee(s.bym.presetMap,(n,D)=>(k(),h("div",{key:D,class:"preset-map-item"},[o("div",Pe,[a(l(m),{value:n.keywords,"onUpdate:value":b=>n.keywords=b,placeholder:"添加关键词",class:"preset-map-keywords"},null,8,["value","onUpdate:value"])]),a(l(I),{class:"preset-map-arrow"},{default:t(()=>e[53]||(e[53]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[o("path",{fill:"currentColor",d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"})],-1)])),_:1}),a(l(U),{value:n.presetId,"onUpdate:value":b=>n.presetId=b,class:"preset-map-preset",options:l(M),filterable:"","filter-option":$,placeholder:"选择预设",clearable:""},null,8,["value","onUpdate:value","options"]),a(l(c),{value:n.priority,"onUpdate:value":b=>n.priority=b,class:"preset-map-priority",min:0,placeholder:"优先级"},null,8,["value","onUpdate:value"]),a(l(x),{value:n.recall,"onUpdate:value":b=>n.recall=b,class:"preset-map-recall","default-value":!1},{checked:t(()=>e[54]||(e[54]=[w(" 撤回 ")])),unchecked:t(()=>e[55]||(e[55]=[w(" 保留 ")])),_:2},1032,["value","onUpdate:value"]),a(l(R),{type:"error",quaternary:"",circle:"",class:"preset-map-delete",onClick:b=>s.bym.presetMap.splice(D,1)},{default:t(()=>[a(l(I),null,{default:t(()=>e[56]||(e[56]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[o("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"})],-1)])),_:1})]),_:2},1032,["onClick"])]))),128)),a(l(R),{type:"primary",dashed:"",class:"preset-map-add",onClick:e[19]||(e[19]=n=>s.bym.presetMap.push({keywords:[],presetId:"",priority:0,recall:!1}))},{default:t(()=>e[57]||(e[57]=[w(" 添加关键词预设映射 ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(p),{class:"inner-card"},{header:t(()=>e[59]||(e[59]=[o("div",{class:"card-header"},[o("div",{class:"card-title"}," 内容过滤 "),o("div",{class:"card-subtitle"}," 设置敏感词过滤规则 ")],-1)])),default:t(()=>[a(l(f),{"label-placement":"left","label-width":"auto",model:s.llm},{default:t(()=>[a(l(v),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(r),{span:"24",label:"用户输入屏蔽词",path:"promptBlockWords"},{default:t(()=>[a(l(m),{value:s.llm.promptBlockWords,"onUpdate:value":e[20]||(e[20]=n=>s.llm.promptBlockWords=n),placeholder:"输入屏蔽词并按回车添加"},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"回复屏蔽词",path:"responseBlockWords"},{default:t(()=>[a(l(m),{value:s.llm.responseBlockWords,"onUpdate:value":e[21]||(e[21]=n=>s.llm.responseBlockWords=n),placeholder:"输入屏蔽词并按回车添加"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"屏蔽策略",path:"blockStrategy"},{default:t(()=>[a(l(U),{value:s.llm.blockStrategy,"onUpdate:value":e[22]||(e[22]=n=>s.llm.blockStrategy=n),options:[{label:"完全屏蔽消息",value:"full"},{label:"仅屏蔽关键词",value:"mask"}]},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"屏蔽替换字符",path:"blockWordMask",disabled:s.llm.blockStrategy!=="mask"},{default:t(()=>[a(l(i),{value:s.llm.blockWordMask,"onUpdate:value":e[23]||(e[23]=n=>s.llm.blockWordMask=n),placeholder:"例如: ***",disabled:s.llm.blockStrategy!=="mask"},null,8,["value","disabled"])]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])]),_:1}),a(l(p),{class:"inner-card mb-4"},{header:t(()=>e[60]||(e[60]=[o("div",{class:"card-header"},[o("div",{class:"card-title"}," 群聊上下文 "),o("div",{class:"card-subtitle"}," 配置群组上下文相关参数 ")],-1)])),default:t(()=>[a(l(f),{"label-placement":"left","label-width":"auto",model:s.llm},{default:t(()=>[a(l(v),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(r),{span:"24 s:24 m:12",label:"启用群组上下文",path:"enableGroupContext"},{default:t(()=>[a(l(x),{value:s.llm.enableGroupContext,"onUpdate:value":e[24]||(e[24]=n=>s.llm.enableGroupContext=n)},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"上下文长度",path:"groupContextLength","span-feedback":24},{feedback:t(()=>e[61]||(e[61]=[o("span",{class:"form-hint"},"保留的群聊消息数量",-1)])),default:t(()=>[a(l(c),{value:s.llm.groupContextLength,"onUpdate:value":e[25]||(e[25]=n=>s.llm.groupContextLength=n),min:0,max:100,style:{width:"100%"},placeholder:"群组上下文保留的消息数"},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"上下文模板前缀",path:"groupContextTemplatePrefix","span-feedback":24},{feedback:t(()=>e[62]||(e[62]=[o("span",{class:"form-hint"},"用于组装群聊上下文提示词的模板前缀",-1)])),default:t(()=>[a(l(i),{value:s.llm.groupContextTemplatePrefix,"onUpdate:value":e[26]||(e[26]=n=>s.llm.groupContextTemplatePrefix=n),type:"textarea",placeholder:"输入上下文模板前缀",autosize:{minRows:3,maxRows:6}},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"上下文消息模板",path:"groupContextTemplateMessage","span-feedback":24},{feedback:t(()=>e[63]||(e[63]=[o("span",{class:"form-hint"},"用于组装群聊上下文提示词的模板内容部分，使用${message.xxx}引用消息属性",-1)])),default:t(()=>[a(l(i),{value:s.llm.groupContextTemplateMessage,"onUpdate:value":e[27]||(e[27]=n=>s.llm.groupContextTemplateMessage=n),type:"textarea",placeholder:"输入上下文消息模板",autosize:{minRows:3,maxRows:6}},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"上下文模板后缀",path:"groupContextTemplateSuffix","span-feedback":24},{feedback:t(()=>e[64]||(e[64]=[o("span",{class:"form-hint"},"用于组装群聊上下文提示词的模板后缀",-1)])),default:t(()=>[a(l(i),{value:s.llm.groupContextTemplateSuffix,"onUpdate:value":e[28]||(e[28]=n=>s.llm.groupContextTemplateSuffix=n),type:"textarea",placeholder:"输入上下文模板后缀",autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),a(l(C),{name:"management",tab:"权限管理"},{default:t(()=>[a(l(p),{class:"inner-card mb-4"},{header:t(()=>e[65]||(e[65]=[o("div",{class:"card-header"},[o("div",{class:"card-title"}," 访问控制 "),o("div",{class:"card-subtitle"}," 设置黑白名单控制机器人访问权限 ")],-1)])),default:t(()=>[a(l(f),{"label-placement":"left","label-width":"auto",model:s.management},{default:t(()=>[a(l(v),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(r),{span:"24 s:24 m:12",label:"黑名单群组",path:"blackGroups"},{default:t(()=>[a(l(m),{value:s.management.blackGroups,"onUpdate:value":e[29]||(e[29]=n=>s.management.blackGroups=n),placeholder:"输入群号并按回车添加"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"白名单群组",path:"whiteGroups"},{default:t(()=>[a(l(m),{value:s.management.whiteGroups,"onUpdate:value":e[30]||(e[30]=n=>s.management.whiteGroups=n),placeholder:"输入群号并按回车添加"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"黑名单用户",path:"blackUsers"},{default:t(()=>[a(l(m),{value:s.management.blackUsers,"onUpdate:value":e[31]||(e[31]=n=>s.management.blackUsers=n),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"白名单用户",path:"whiteUsers"},{default:t(()=>[a(l(m),{value:s.management.whiteUsers,"onUpdate:value":e[32]||(e[32]=n=>s.management.whiteUsers=n),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"对话速率限制",path:"defaultRateLimit"},{default:t(()=>[a(l(c),{value:s.management.defaultRateLimit,"onUpdate:value":e[33]||(e[33]=n=>s.management.defaultRateLimit=n),placeholder:"0表示不限制",min:0,style:{width:"100%"}},{suffix:t(()=>e[66]||(e[66]=[w(" 次/分钟 ")])),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),a(l(C),{name:"chaite",tab:"Chaite配置"},{default:t(()=>[a(l(p),{class:"inner-card mb-4"},{header:t(()=>e[67]||(e[67]=[o("div",{class:"card-header"},[o("div",{class:"card-title"}," 文件与目录 "),o("div",{class:"card-subtitle"}," 设置Chaite相关文件目录 ")],-1)])),default:t(()=>[a(l(f),{"label-placement":"left","label-width":"auto",model:s.chaite},{default:t(()=>[a(l(v),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(r),{span:"24 s:24 m:12",label:"数据目录",path:"dataDir"},{default:t(()=>[a(l(i),{value:s.chaite.dataDir,"onUpdate:value":e[34]||(e[34]=n=>s.chaite.dataDir=n),placeholder:"相对于插件目录"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"处理器目录",path:"processorsDirPath"},{default:t(()=>[a(l(i),{value:s.chaite.processorsDirPath,"onUpdate:value":e[35]||(e[35]=n=>s.chaite.processorsDirPath=n),placeholder:"相对于插件目录"},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"工具目录",path:"toolsDirPath"},{default:t(()=>[a(l(i),{value:s.chaite.toolsDirPath,"onUpdate:value":e[36]||(e[36]=n=>s.chaite.toolsDirPath=n),placeholder:"相对于插件目录"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(p),{class:"inner-card"},{header:t(()=>e[68]||(e[68]=[o("div",{class:"card-header"},[o("div",{class:"card-title"}," API与管理面板 "),o("div",{class:"card-subtitle"}," 设置云端API和管理面板配置 ")],-1)])),default:t(()=>[a(l(f),{"label-placement":"left","label-width":"auto",model:s.chaite},{default:t(()=>[a(l(v),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(r),{span:"24",label:"云端API URL",path:"cloudBaseUrl"},{default:t(()=>[a(l(i),{value:s.chaite.cloudBaseUrl,"onUpdate:value":e[37]||(e[37]=n=>s.chaite.cloudBaseUrl=n),placeholder:"输入云端API URL"},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"云端API Key",path:"cloudApiKey"},{default:t(()=>[a(l(i),{value:s.chaite.cloudApiKey,"onUpdate:value":e[38]||(e[38]=n=>s.chaite.cloudApiKey=n),type:"password","show-password-on":"click",placeholder:"输入云端API Key"},null,8,["value"])]),_:1}),a(l(r),{span:"24",label:"认证密钥",path:"authKey"},{default:t(()=>[a(l(i),{value:s.chaite.authKey,"onUpdate:value":e[39]||(e[39]=n=>s.chaite.authKey=n),type:"password","show-password-on":"click",placeholder:"非必要勿修改"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"监听地址",path:"host"},{default:t(()=>[a(l(i),{value:s.chaite.host,"onUpdate:value":e[40]||(e[40]=n=>s.chaite.host=n),placeholder:"管理面板监听地址"},null,8,["value"])]),_:1}),a(l(r),{span:"24 s:24 m:12",label:"监听端口",path:"port"},{default:t(()=>[a(l(c),{value:s.chaite.port,"onUpdate:value":e[41]||(e[41]=n=>s.chaite.port=n),min:1,max:65535,style:{width:"100%"},placeholder:"输入监听端口"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["value"]),o("div",Ce,[a(l(le),null,{default:t(()=>[a(l(R),{type:"primary",onClick:V},{default:t(()=>e[69]||(e[69]=[w(" 保存配置 ")])),_:1})]),_:1})])])])]),_:1})])}}}),Ne=ae(Le,[["__scopeId","data-v-ade6bc4b"]]);export{Ne as default};
