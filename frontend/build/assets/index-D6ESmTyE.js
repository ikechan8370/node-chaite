import{X as ge,Y as xe,Z as H,$ as E,a0 as Z,a1 as S,a2 as ie,a3 as he,a4 as ye,d as ce,p as w,a5 as we,a6 as ke,a7 as Ce,a8 as Ie,a9 as Pe,aa as Ue,ab as Me,ac as Se,q as Re,ad as Le,ae as Te,af as fe,ag as ze,s as ue,ah as $e,ai as T,aj as Be,r as j,m as le,c as D,o as k,a as n,ak as je,U as be,L as De,M as me,v as We,al as Fe,e as a,w as t,am as Ae,t as N,u as l,an as He,ao as Y,y,C as z,E as p,V as $,g as c,F as Ee,A as Ne,ap as de,B as J,z as ee,b as Q,n as ve,N as q,k as Ge}from"./index-kLEe-31q.js";import{f as Oe}from"./presets-N8YNqfPr.js";import{f as Ke,u as Ve,a as qe,d as Ze}from"./memory-C4zB60HJ.js";import{_ as I}from"./FormItem-C2ziP3u7.js";import{N as P}from"./Grid-CmLEm3vL.js";import{_ as i}from"./FormItemGridItem-BiRqZE_B.js";import{N as g}from"./InputNumber-qiteD5Uu.js";import{N as U}from"./DynamicTags-CyLbZ9I2.js";import"./prop-BjyUHhTu.js";function Je(v){const{lineHeight:u,borderRadius:h,fontWeightStrong:W,baseColor:x,dividerColor:B,actionColor:_,textColor1:s,textColor2:r,closeColorHover:M,closeColorPressed:b,closeIconColor:R,closeIconColorHover:L,closeIconColorPressed:f,infoColor:m,successColor:F,warningColor:G,errorColor:O,fontSize:X}=v;return Object.assign(Object.assign({},xe),{fontSize:X,lineHeight:u,titleFontWeight:W,borderRadius:h,border:`1px solid ${B}`,color:_,titleTextColor:s,iconColor:r,contentTextColor:r,closeBorderRadius:h,closeColorHover:M,closeColorPressed:b,closeIconColor:R,closeIconColorHover:L,closeIconColorPressed:f,borderInfo:`1px solid ${H(x,E(m,{alpha:.25}))}`,colorInfo:H(x,E(m,{alpha:.08})),titleTextColorInfo:s,iconColorInfo:m,contentTextColorInfo:r,closeColorHoverInfo:M,closeColorPressedInfo:b,closeIconColorInfo:R,closeIconColorHoverInfo:L,closeIconColorPressedInfo:f,borderSuccess:`1px solid ${H(x,E(F,{alpha:.25}))}`,colorSuccess:H(x,E(F,{alpha:.08})),titleTextColorSuccess:s,iconColorSuccess:F,contentTextColorSuccess:r,closeColorHoverSuccess:M,closeColorPressedSuccess:b,closeIconColorSuccess:R,closeIconColorHoverSuccess:L,closeIconColorPressedSuccess:f,borderWarning:`1px solid ${H(x,E(G,{alpha:.33}))}`,colorWarning:H(x,E(G,{alpha:.08})),titleTextColorWarning:s,iconColorWarning:G,contentTextColorWarning:r,closeColorHoverWarning:M,closeColorPressedWarning:b,closeIconColorWarning:R,closeIconColorHoverWarning:L,closeIconColorPressedWarning:f,borderError:`1px solid ${H(x,E(O,{alpha:.25}))}`,colorError:H(x,E(O,{alpha:.08})),titleTextColorError:s,iconColorError:O,contentTextColorError:r,closeColorHoverError:M,closeColorPressedError:b,closeIconColorError:R,closeIconColorHoverError:L,closeIconColorPressedError:f})}const Qe={common:ge,self:Je},_e=Z("alert",`
 line-height: var(--n-line-height);
 border-radius: var(--n-border-radius);
 position: relative;
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-color);
 text-align: start;
 word-break: break-word;
`,[S("border",`
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 transition: border-color .3s var(--n-bezier);
 border: var(--n-border);
 pointer-events: none;
 `),ie("closable",[Z("alert-body",[S("title",`
 padding-right: 24px;
 `)])]),S("icon",{color:"var(--n-icon-color)"}),Z("alert-body",{padding:"var(--n-padding)"},[S("title",{color:"var(--n-title-text-color)"}),S("content",{color:"var(--n-content-text-color)"})]),he({originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.9)"}}),S("icon",`
 position: absolute;
 left: 0;
 top: 0;
 align-items: center;
 justify-content: center;
 display: flex;
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 margin: var(--n-icon-margin);
 `),S("close",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 `),ie("show-icon",[Z("alert-body",{paddingLeft:"calc(var(--n-icon-margin-left) + var(--n-icon-size) + var(--n-icon-margin-right))"})]),ie("right-adjust",[Z("alert-body",{paddingRight:"calc(var(--n-close-size) + var(--n-padding) + 2px)"})]),Z("alert-body",`
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 `,[S("title",`
 transition: color .3s var(--n-bezier);
 font-size: 16px;
 line-height: 19px;
 font-weight: var(--n-title-font-weight);
 `,[ye("& +",[S("content",{marginTop:"9px"})])]),S("content",{transition:"color .3s var(--n-bezier)",fontSize:"var(--n-font-size)"})]),S("icon",{transition:"color .3s var(--n-bezier)"})]),Xe=Object.assign(Object.assign({},fe.props),{title:String,showIcon:{type:Boolean,default:!0},type:{type:String,default:"default"},bordered:{type:Boolean,default:!0},closable:Boolean,onClose:Function,onAfterLeave:Function,onAfterHide:Function}),Ye=ce({name:"Alert",inheritAttrs:!1,props:Xe,slots:Object,setup(v){const{mergedClsPrefixRef:u,mergedBorderedRef:h,inlineThemeDisabled:W,mergedRtlRef:x}=Te(v),B=fe("Alert","-alert",_e,Qe,v,u),_=ze("Alert",x,u),s=ue(()=>{const{common:{cubicBezierEaseInOut:f},self:m}=B.value,{fontSize:F,borderRadius:G,titleFontWeight:O,lineHeight:X,iconSize:oe,iconMargin:K,iconMarginRtl:se,closeIconSize:ae,closeBorderRadius:re,closeSize:V,closeMargin:te,closeMarginRtl:d,padding:e}=m,{type:C}=v,{left:ne,right:o}=$e(K);return{"--n-bezier":f,"--n-color":m[T("color",C)],"--n-close-icon-size":ae,"--n-close-border-radius":re,"--n-close-color-hover":m[T("closeColorHover",C)],"--n-close-color-pressed":m[T("closeColorPressed",C)],"--n-close-icon-color":m[T("closeIconColor",C)],"--n-close-icon-color-hover":m[T("closeIconColorHover",C)],"--n-close-icon-color-pressed":m[T("closeIconColorPressed",C)],"--n-icon-color":m[T("iconColor",C)],"--n-border":m[T("border",C)],"--n-title-text-color":m[T("titleTextColor",C)],"--n-content-text-color":m[T("contentTextColor",C)],"--n-line-height":X,"--n-border-radius":G,"--n-font-size":F,"--n-title-font-weight":O,"--n-icon-size":oe,"--n-icon-margin":K,"--n-icon-margin-rtl":se,"--n-close-size":V,"--n-close-margin":te,"--n-close-margin-rtl":d,"--n-padding":e,"--n-icon-margin-left":ne,"--n-icon-margin-right":o}}),r=W?Be("alert",ue(()=>v.type[0]),s,v):void 0,M=j(!0),b=()=>{const{onAfterLeave:f,onAfterHide:m}=v;f&&f(),m&&m()};return{rtlEnabled:_,mergedClsPrefix:u,mergedBordered:h,visible:M,handleCloseClick:()=>{var f;Promise.resolve((f=v.onClose)===null||f===void 0?void 0:f.call(v)).then(m=>{m!==!1&&(M.value=!1)})},handleAfterLeave:()=>{b()},mergedTheme:B,cssVars:W?void 0:s,themeClass:r?.themeClass,onRender:r?.onRender}},render(){var v;return(v=this.onRender)===null||v===void 0||v.call(this),w(Le,{onAfterLeave:this.handleAfterLeave},{default:()=>{const{mergedClsPrefix:u,$slots:h}=this,W={class:[`${u}-alert`,this.themeClass,this.closable&&`${u}-alert--closable`,this.showIcon&&`${u}-alert--show-icon`,!this.title&&this.closable&&`${u}-alert--right-adjust`,this.rtlEnabled&&`${u}-alert--rtl`],style:this.cssVars,role:"alert"};return this.visible?w("div",Object.assign({},we(this.$attrs,W)),this.closable&&w(ke,{clsPrefix:u,class:`${u}-alert__close`,onClick:this.handleCloseClick}),this.bordered&&w("div",{class:`${u}-alert__border`}),this.showIcon&&w("div",{class:`${u}-alert__icon`,"aria-hidden":"true"},Ce(h.icon,()=>[w(Ie,{clsPrefix:u},{default:()=>{switch(this.type){case"success":return w(Se,null);case"info":return w(Me,null);case"warning":return w(Ue,null);case"error":return w(Pe,null);default:return null}}})])),w("div",{class:[`${u}-alert-body`,this.mergedBordered&&`${u}-alert-body--bordered`]},Re(h.header,x=>{const B=x||this.title;return B?w("div",{class:`${u}-alert-body__title`},B):null}),h.default&&w("div",{class:`${u}-alert-body__content`},h))):null}})}}),el={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function ll(v,u){return k(),D("svg",el,u[0]||(u[0]=[n("path",{fill:"currentColor","fill-rule":"evenodd",d:"m16.871 33.044l-.873 11.66c-.062.82.667 1.383 1.318 1.018c4.613-2.584 19.062-12.074 26.386-32.932c.336-.957-.567-1.82-1.337-1.28c-4.326 3.03-13.78 9.29-19.623 10.484c0 0 3.742-2.6 5.981-6.588a1.2 1.2 0 0 0-.043-1.245L20.513 2.389c-.484-.697-1.478-.408-1.652.481l-2.543 12.937L4.384 26.223c-.598.522-.476 1.577.215 1.856zm21.104-4.596c-.756 1.055-2.384 3.224-3.887 4.55c-.3.265-.26.709.084.925l7.943 4.986c.478.3 1.123-.056 1.043-.576c-.37-2.383-1.434-7.351-4.125-9.959c-.3-.29-.819-.26-1.059.074","clip-rule":"evenodd"},null,-1)]))}const al=le({name:"icon-park-outline-star-one",render:ll}),tl={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function ol(v,u){return k(),D("svg",tl,u[0]||(u[0]=[n("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"4",d:"M18 6H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2Zm0 22H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Zm17-8a7 7 0 1 0 0-14a7 7 0 0 0 0 14Zm5 8H30a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Z"},null,-1)]))}const sl=le({name:"icon-park-outline-system",render:ol}),rl={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function nl(v,u){return k(),D("svg",rl,u[0]||(u[0]=[je('<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="4"><path stroke-linejoin="round" d="M20 10H6a2 2 0 0 0-2 2v26a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2v-2.5"></path><path d="M10 23h8m-8 8h24"></path><circle cx="34" cy="16" r="6" stroke-linejoin="round"></circle><path stroke-linejoin="round" d="M44 28.419C42.047 24.602 38 22 34 22s-5.993 1.133-8.05 3"></path></g>',1)]))}const il=le({name:"icon-park-outline-permissions",render:nl}),dl={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function ul(v,u){return k(),D("svg",dl,u[0]||(u[0]=[n("g",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"4"},[n("rect",{width:"24",height:"18",x:"12",y:"20",rx:"2"}),n("path",{"stroke-linecap":"round",d:"M18 20v-6c0-3.682 2.686-6 6-6c1.85 0 3.503.722 4.604 2a5.6 5.6 0 0 1 1.102 2M24 28v2M6 18v12m36-12v12"})],-1)]))}const pl=le({name:"icon-park-outline-electronic-locks-open",render:ul}),ml={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function vl(v,u){return k(),D("svg",ml,u[0]||(u[0]=[n("g",{fill:"none",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"4.667",d:"M19.036 44q-1.47-4.793-4.435-7.147c-2.965-2.353-7.676-.89-9.416-3.318s1.219-6.892 2.257-9.526s-3.98-3.565-3.394-4.313q.585-.748 7.609-4.316Q13.652 4 26.398 4C39.144 4 44 14.806 44 21.68c0 6.872-5.88 14.276-14.256 15.873q-1.123 1.636 3.24 6.447"}),n("path",{"stroke-linejoin":"round","stroke-width":"4",d:"M19.5 14.5q-.981 3.801.583 5.339q1.563 1.537 5.328 2.01q-.855 4.903 2.083 4.6q2.937-.302 3.53-2.44q4.59 1.29 4.976-2.16c.385-3.45-1.475-6.201-2.238-6.201s-2.738-.093-2.738-1.148s-2.308-1.65-4.391-1.65s-.83-1.405-3.69-.85q-2.86.555-3.443 2.5Z","clip-rule":"evenodd"}),n("path",{"stroke-linecap":"round","stroke-width":"4",d:"M30.5 25.5c-1.017.631-2.412 1.68-3 2.5c-1.469 2.05-2.66 3.298-2.92 4.608"})],-1)]))}const cl=le({name:"icon-park-outline-brain",render:vl});function fl(){return be.Get("/api/config/")}function bl(v){return be.Post("/api/config/",v)}const gl={class:"config-container"},xl={class:"layout-container"},hl={class:"sidebar"},yl={class:"version-info"},wl={class:"content-area"},kl={class:"preset-map-container"},Cl={class:"preset-map-keyword-container"},Il={class:"simple-extension-status"},Pl={class:"simple-extension-paths"},Ul={key:0},Ml={class:"action-bar",style:{"margin-top":"16px"}},Sl={class:"action-bar"},Rl=ce({__name:"index",setup(v){const u=De(),h=j("basic"),W=j(null);function x(d){return()=>w(de,null,{default:()=>w(d)})}const B=[{label:"基础设置",key:"basic",icon:x(sl)},{label:"模型与对话",key:"llm",icon:x(il)},{label:"权限管理",key:"management",icon:x(pl)},{label:"记忆配置",key:"memory",icon:x(cl)},{label:"Chaite配置",key:"chaite",icon:x(al)}];function _(d){h.value=d}const s=me({version:"3.0.0",basic:{toggleMode:"at",togglePrefix:"#chat",debug:!1,commandPrefix:"^#chatgpt"},bym:{enable:!1,hit:["bym"],probability:.02,defaultPreset:"",presetPrefix:"",presetMap:[],maxTokens:0,temperature:-1,sendReasoning:!1},llm:{defaultModel:"",embeddingModel:"gemini-embedding-exp-03-07",dimensions:0,defaultChatPresetId:"",enableCustomPreset:!1,customPresetUserWhiteList:[],customPresetUserBlackList:[],promptBlockWords:[],responseBlockWords:[],blockStrategy:"full",blockWordMask:"**",enableGroupContext:!1,groupContextLength:20,groupContextTemplatePrefix:`Latest several messages in the group chat:
| sender.card | sender.nickname | sender.user_id | sender.role | sender.title | time | messageId | raw_message |
|---|---|---|---|---|---|---|---|`,groupContextTemplateMessage:"| ${message.sender.card} | ${message.sender.nickname} | ${message.sender.user_id} | ${message.sender.role} | ${message.sender.title} | ${message.time} | ${message.messageId} | ${message.raw_message} |",groupContextTemplateSuffix:`
`},management:{blackGroups:[],whiteGroups:[],blackUsers:[],whiteUsers:[],defaultRateLimit:0},chaite:{dataDir:"data",processorsDirPath:"utils/processors",toolsDirPath:"utils/tools",cloudBaseUrl:"",cloudApiKey:"",authKey:"",host:"",port:48370}}),r=me({database:"data/memory.db",vectorDimensions:1536,group:{enable:!1,enabledGroups:[],extractionModel:"",extractionPresetId:"",minMessageCount:80,maxMessageWindow:300,retrievalMode:"hybrid",hybridPrefer:"vector-first",historyPollInterval:300,historyBatchSize:120,promptHeader:"# 群聊长期记忆",promptItemTemplate:"- ${fact}${topicSuffix}",promptFooter:"",vectorMaxDistance:0,textMaxBm25Score:0,maxFactsPerInjection:5,minImportanceForInjection:.3},user:{enable:!1,whitelist:[],blacklist:[],extractionModel:"",extractionPresetId:"",maxItemsPerInjection:5,maxRelevantItemsPerQuery:3,minImportanceForInjection:0,promptHeader:"# 用户画像",promptItemTemplate:"- ${value}",promptFooter:""},extensions:{simple:{enable:!1,libraryPath:"",dictPath:"",useJieba:!1}}}),M=[{label:"自动识别 (推荐)",value:"auto"},{label:"Linux x64",value:"linux-x64"},{label:"Linux ARM64",value:"linux-arm64"},{label:"Windows x64",value:"win32-x64"},{label:"Windows x86 (32位)",value:"win32-ia32"},{label:"Windows ARM64",value:"win32-arm64"},{label:"macOS x64",value:"darwin-x64"}],b=j(null),R=j(!1),L=j(!1),f=j("auto"),m=j("");function F(d){d&&(typeof d.database=="string"&&(r.database=d.database),typeof d.vectorDimensions=="number"&&(r.vectorDimensions=d.vectorDimensions),d.group&&Object.assign(r.group,d.group),d.user&&Object.assign(r.user,d.user),d.extensions?.simple&&Object.assign(r.extensions.simple,d.extensions.simple))}async function G(){const d=await fl();return d.isSuccess?u.success("配置加载成功"):u.error("配置加载失败"),Object.assign(s,d.data),Array.isArray(s.bym.presetMap)||(s.bym.presetMap=[]),d.data}async function O(){(await bl(s)).isSuccess?u.success("配置保存成功"):u.error("配置保存失败")}async function X(){try{const d=await Ke();d.isSuccess?F(d.data):u.error("记忆配置加载失败")}catch(d){console.error("Failed to load memory config:",d)}}async function oe(){try{const d=await Ve(r);d.isSuccess?(u.success("记忆配置保存成功"),F(d.data),await K()):u.error(d.message||"记忆配置保存失败")}catch(d){console.error("Failed to update memory config:",d),u.error("记忆配置保存失败")}}async function K(){R.value=!0;try{const d=await qe();d.isSuccess?b.value=d.data:u.error(d.message||"扩展状态获取失败")}catch(d){console.error("Failed to fetch simple extension status:",d),u.error("扩展状态获取失败")}finally{R.value=!1}}async function se(){const d={};f.value!=="auto"&&(d.assetKey=f.value),m.value.trim().length>0&&(d.assetName=m.value.trim()),L.value=!0;try{const e=await Ze(d);e.isSuccess?(u.success("扩展下载完成，记得保存配置并启用分词。"),e.data.assetKey&&M.some(C=>C.value===e.data.assetKey)?f.value=e.data.assetKey:f.value="auto",m.value="",r.extensions.simple.libraryPath=e.data.libraryPath,r.extensions.simple.dictPath=e.data.dictPath,await K()):u.error(e.message||"扩展下载失败")}catch(e){console.error("Failed to download simple extension:",e),u.error("扩展下载失败")}finally{L.value=!1}}const ae=j([]);function re(){Oe({}).then(d=>{ae.value=d.data}).catch(d=>{console.error(d)})}const V=ue(()=>ae.value.map(d=>({label:d.name,value:d.id})));function te(d,e){return e.label.toLowerCase().includes(d.toLowerCase())}return We(async()=>{try{await Promise.all([G(),X()]),re(),await K()}catch(d){console.error("加载配置失败:",d),u.error("配置加载失败")}}),(d,e)=>{const C=Ae,ne=Fe("router-link");return k(),D("div",gl,[a(l(y),{title:"系统配置",class:"main-card"},{default:t(()=>[n("div",xl,[n("div",hl,[a(C,{value:h.value,"onUpdate:value":[e[0]||(e[0]=o=>h.value=o),_],options:B},null,8,["value"]),n("div",yl,[n("span",null,"版本: "+N(s.version),1)])]),n("div",wl,[a(l(He),{ref_key:"tabsRef",ref:W,value:h.value,"onUpdate:value":e[78]||(e[78]=o=>h.value=o),type:"line",animated:"",class:"responsive-tabs"},{default:t(()=>[a(l(Y),{name:"basic",tab:"基础设置"},{default:t(()=>[a(l(y),{class:"inner-card"},{header:t(()=>e[79]||(e[79]=[n("div",{class:"card-header"},[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 触发与命令 "),n("div",{class:"card-subtitle"}," 设置机器人的触发方式和基本命令 ")])],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:s.basic},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"触发方式",path:"toggleMode"},{default:t(()=>[a(l(z),{value:s.basic.toggleMode,"onUpdate:value":e[1]||(e[1]=o=>s.basic.toggleMode=o),options:[{label:"@ 触发",value:"at"},{label:"前缀触发",value:"prefix"}]},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"触发前缀",path:"togglePrefix"},{default:t(()=>[a(l(p),{value:s.basic.togglePrefix,"onUpdate:value":e[2]||(e[2]=o=>s.basic.togglePrefix=o),placeholder:"仅前缀触发时有效",disabled:s.basic.toggleMode!=="prefix"},null,8,["value","disabled"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"命令前缀",path:"commandPrefix"},{default:t(()=>[a(l(p),{value:s.basic.commandPrefix,"onUpdate:value":e[3]||(e[3]=o=>s.basic.commandPrefix=o),placeholder:"例如: ^#chatgpt"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"调试模式",path:"debug"},{default:t(()=>[a(l($),{value:s.basic.debug,"onUpdate:value":e[4]||(e[4]=o=>s.basic.debug=o)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),a(l(Y),{name:"llm",tab:"模型与对话"},{default:t(()=>[a(l(y),{class:"inner-card mb-4"},{header:t(()=>e[80]||(e[80]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 模型配置 "),n("div",{class:"card-subtitle"}," 设置默认使用的模型和嵌入模型 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:s.llm},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"嵌入模型",path:"embeddingModel"},{default:t(()=>[a(l(p),{value:s.llm.embeddingModel,"onUpdate:value":e[5]||(e[5]=o=>s.llm.embeddingModel=o),placeholder:"输入嵌入模型名称"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"嵌入维度",path:"dimensions"},{default:t(()=>[a(l(g),{value:s.llm.dimensions,"onUpdate:value":e[6]||(e[6]=o=>s.llm.dimensions=o),clearable:"",placeholder:"0表示自动",min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"默认对话预设",path:"defaultChatPresetId"},{default:t(()=>[a(l(z),{value:s.llm.defaultChatPresetId,"onUpdate:value":e[7]||(e[7]=o=>s.llm.defaultChatPresetId=o),options:V.value,filterable:"",placeholder:"选择默认对话预设",clearable:""},null,8,["value","options"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(y),{class:"inner-card mb-4"},{header:t(()=>e[81]||(e[81]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 预设控制 "),n("div",{class:"card-subtitle"}," 设置用户预设切换权限 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:s.llm},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"允许切换预设",path:"enableCustomPreset"},{default:t(()=>[a(l($),{value:s.llm.enableCustomPreset,"onUpdate:value":e[8]||(e[8]=o=>s.llm.enableCustomPreset=o)},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"预设白名单用户",path:"customPresetUserWhiteList"},{default:t(()=>[a(l(U),{value:s.llm.customPresetUserWhiteList,"onUpdate:value":e[9]||(e[9]=o=>s.llm.customPresetUserWhiteList=o),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"预设黑名单用户",path:"customPresetUserBlackList"},{default:t(()=>[a(l(U),{value:s.llm.customPresetUserBlackList,"onUpdate:value":e[10]||(e[10]=o=>s.llm.customPresetUserBlackList=o),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(y),{class:"inner-card"},{header:t(()=>e[82]||(e[82]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 伪人模式 "),n("div",{class:"card-subtitle"}," 设置和管理伪人模式配置 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:s.bym},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"启用伪人模式",path:"enable"},{default:t(()=>[a(l($),{value:s.bym.enable,"onUpdate:value":e[11]||(e[11]=o=>s.bym.enable=o)},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"伪人触发词",path:"hit","span-feedback":24},{feedback:t(()=>e[83]||(e[83]=[n("span",{class:"form-hint"},"包含这些词时将必定触发伪人模式",-1)])),default:t(()=>[a(l(U),{value:s.bym.hit,"onUpdate:value":e[12]||(e[12]=o=>s.bym.hit=o),placeholder:"输入触发词并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"随机触发概率",path:"probability","span-feedback":24},{feedback:t(()=>e[84]||(e[84]=[n("span",{class:"form-hint"},"不包含触发词时随机触发的概率",-1)])),default:t(()=>[a(l(g),{value:s.bym.probability,"onUpdate:value":e[13]||(e[13]=o=>s.bym.probability=o),min:0,max:1,step:.01,style:{width:"100%"}},{suffix:t(()=>[c(N((s.bym.probability*100).toFixed(0))+"% ",1)]),_:1},8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"默认预设",path:"defaultPreset","span-feedback":24},{feedback:t(()=>e[85]||(e[85]=[n("span",{class:"form-hint"},"伪人模式的默认预设",-1)])),default:t(()=>[a(l(z),{value:s.bym.defaultPreset,"onUpdate:value":e[14]||(e[14]=o=>s.bym.defaultPreset=o),options:V.value,filterable:"","filter-option":te,placeholder:"选择默认预设",clearable:""},null,8,["value","options"])]),_:1}),a(l(i),{span:"24",label:"预设前缀",path:"presetPrefix","span-feedback":24},{feedback:t(()=>e[86]||(e[86]=[n("span",{class:"form-hint"},"会加在所有伪人模式预设前的通用前缀，可用于配置通用的伪人发言风格",-1)])),default:t(()=>[a(l(p),{value:s.bym.presetPrefix,"onUpdate:value":e[15]||(e[15]=o=>s.bym.presetPrefix=o),type:"textarea",placeholder:"输入预设前缀",autosize:{minRows:3,maxRows:6}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"最大Token数",path:"maxTokens","span-feedback":24},{feedback:t(()=>e[87]||(e[87]=[n("span",{class:"form-hint"},"大于0时会覆盖预设中的maxToken值",-1)])),default:t(()=>[a(l(g),{value:s.bym.maxTokens,"onUpdate:value":e[16]||(e[16]=o=>s.bym.maxTokens=o),min:0,placeholder:"0表示不限制",style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"温度",path:"temperature","span-feedback":24},{feedback:t(()=>e[88]||(e[88]=[n("span",{class:"form-hint"},"大于等于0时会覆盖预设中的temperature值，-1表示使用预设值",-1)])),default:t(()=>[a(l(g),{value:s.bym.temperature,"onUpdate:value":e[17]||(e[17]=o=>s.bym.temperature=o),min:-1,max:2,step:.1,placeholder:"-1表示使用预设值",style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"发送思考过程",path:"sendReasoning"},{default:t(()=>[a(l($),{value:s.bym.sendReasoning,"onUpdate:value":e[18]||(e[18]=o=>s.bym.sendReasoning=o)},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"预设映射",path:"presetMap","span-feedback":24},{feedback:t(()=>e[94]||(e[94]=[n("span",{class:"form-hint"},"按优先级排序，消息包含特定关键词时使用对应的预设",-1)])),default:t(()=>[n("div",kl,[(k(!0),D(Ee,null,Ne(s.bym.presetMap,(o,pe)=>(k(),D("div",{key:pe,class:"preset-map-item"},[n("div",Cl,[a(l(U),{value:o.keywords,"onUpdate:value":A=>o.keywords=A,placeholder:"添加关键词",class:"preset-map-keywords"},null,8,["value","onUpdate:value"])]),a(l(de),{class:"preset-map-arrow"},{default:t(()=>e[89]||(e[89]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[n("path",{fill:"currentColor",d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"})],-1)])),_:1}),a(l(z),{value:o.presetId,"onUpdate:value":A=>o.presetId=A,class:"preset-map-preset",options:V.value,filterable:"","filter-option":te,placeholder:"选择预设",clearable:""},null,8,["value","onUpdate:value","options"]),a(l(g),{value:o.priority,"onUpdate:value":A=>o.priority=A,class:"preset-map-priority",min:0,placeholder:"优先级"},null,8,["value","onUpdate:value"]),a(l($),{value:o.recall,"onUpdate:value":A=>o.recall=A,class:"preset-map-recall","default-value":!1},{checked:t(()=>e[90]||(e[90]=[c(" 撤回 ")])),unchecked:t(()=>e[91]||(e[91]=[c(" 保留 ")])),_:2},1032,["value","onUpdate:value"]),a(l(J),{type:"error",quaternary:"",circle:"",class:"preset-map-delete",onClick:A=>s.bym.presetMap.splice(pe,1)},{default:t(()=>[a(l(de),null,{default:t(()=>e[92]||(e[92]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[n("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"})],-1)])),_:1})]),_:2},1032,["onClick"])]))),128)),a(l(J),{type:"primary",dashed:"",class:"preset-map-add",onClick:e[19]||(e[19]=o=>s.bym.presetMap.push({keywords:[],presetId:"",priority:0,recall:!1}))},{default:t(()=>e[93]||(e[93]=[c(" 添加关键词预设映射 ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(y),{class:"inner-card"},{header:t(()=>e[95]||(e[95]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 内容过滤 "),n("div",{class:"card-subtitle"}," 设置敏感词过滤规则 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:s.llm},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24",label:"用户输入屏蔽词",path:"promptBlockWords"},{default:t(()=>[a(l(U),{value:s.llm.promptBlockWords,"onUpdate:value":e[20]||(e[20]=o=>s.llm.promptBlockWords=o),placeholder:"输入屏蔽词并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"回复屏蔽词",path:"responseBlockWords"},{default:t(()=>[a(l(U),{value:s.llm.responseBlockWords,"onUpdate:value":e[21]||(e[21]=o=>s.llm.responseBlockWords=o),placeholder:"输入屏蔽词并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"屏蔽策略",path:"blockStrategy"},{default:t(()=>[a(l(z),{value:s.llm.blockStrategy,"onUpdate:value":e[22]||(e[22]=o=>s.llm.blockStrategy=o),options:[{label:"完全屏蔽消息",value:"full"},{label:"仅屏蔽关键词",value:"mask"}]},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"屏蔽替换字符",path:"blockWordMask",disabled:s.llm.blockStrategy!=="mask"},{default:t(()=>[a(l(p),{value:s.llm.blockWordMask,"onUpdate:value":e[23]||(e[23]=o=>s.llm.blockWordMask=o),placeholder:"例如: ***",disabled:s.llm.blockStrategy!=="mask"},null,8,["value","disabled"])]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])]),_:1}),a(l(y),{class:"inner-card mb-4"},{header:t(()=>e[96]||(e[96]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 群聊上下文 "),n("div",{class:"card-subtitle"}," 配置群组上下文相关参数 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:s.llm},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"启用群组上下文",path:"enableGroupContext"},{default:t(()=>[a(l($),{value:s.llm.enableGroupContext,"onUpdate:value":e[24]||(e[24]=o=>s.llm.enableGroupContext=o)},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"上下文长度",path:"groupContextLength","span-feedback":24},{feedback:t(()=>e[97]||(e[97]=[n("span",{class:"form-hint"},"保留的群聊消息数量",-1)])),default:t(()=>[a(l(g),{value:s.llm.groupContextLength,"onUpdate:value":e[25]||(e[25]=o=>s.llm.groupContextLength=o),min:0,max:100,style:{width:"100%"},placeholder:"群组上下文保留的消息数"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"上下文模板前缀",path:"groupContextTemplatePrefix","span-feedback":24},{feedback:t(()=>e[98]||(e[98]=[n("span",{class:"form-hint"},"用于组装群聊上下文提示词的模板前缀",-1)])),default:t(()=>[a(l(p),{value:s.llm.groupContextTemplatePrefix,"onUpdate:value":e[26]||(e[26]=o=>s.llm.groupContextTemplatePrefix=o),type:"textarea",placeholder:"输入上下文模板前缀",autosize:{minRows:3,maxRows:6}},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"上下文消息模板",path:"groupContextTemplateMessage","span-feedback":24},{feedback:t(()=>e[99]||(e[99]=[n("span",{class:"form-hint"},"用于组装群聊上下文提示词的模板内容部分，使用${message.xxx}引用消息属性",-1)])),default:t(()=>[a(l(p),{value:s.llm.groupContextTemplateMessage,"onUpdate:value":e[27]||(e[27]=o=>s.llm.groupContextTemplateMessage=o),type:"textarea",placeholder:"输入上下文消息模板",autosize:{minRows:3,maxRows:6}},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"上下文模板后缀",path:"groupContextTemplateSuffix","span-feedback":24},{feedback:t(()=>e[100]||(e[100]=[n("span",{class:"form-hint"},"用于组装群聊上下文提示词的模板后缀",-1)])),default:t(()=>[a(l(p),{value:s.llm.groupContextTemplateSuffix,"onUpdate:value":e[28]||(e[28]=o=>s.llm.groupContextTemplateSuffix=o),type:"textarea",placeholder:"输入上下文模板后缀",autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),a(l(Y),{name:"management",tab:"权限管理"},{default:t(()=>[a(l(y),{class:"inner-card mb-4"},{header:t(()=>e[101]||(e[101]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 访问控制 "),n("div",{class:"card-subtitle"}," 设置黑白名单控制机器人访问权限 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:s.management},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"黑名单群组",path:"blackGroups"},{default:t(()=>[a(l(U),{value:s.management.blackGroups,"onUpdate:value":e[29]||(e[29]=o=>s.management.blackGroups=o),placeholder:"输入群号并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"白名单群组",path:"whiteGroups"},{default:t(()=>[a(l(U),{value:s.management.whiteGroups,"onUpdate:value":e[30]||(e[30]=o=>s.management.whiteGroups=o),placeholder:"输入群号并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"黑名单用户",path:"blackUsers"},{default:t(()=>[a(l(U),{value:s.management.blackUsers,"onUpdate:value":e[31]||(e[31]=o=>s.management.blackUsers=o),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"白名单用户",path:"whiteUsers"},{default:t(()=>[a(l(U),{value:s.management.whiteUsers,"onUpdate:value":e[32]||(e[32]=o=>s.management.whiteUsers=o),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"对话速率限制",path:"defaultRateLimit"},{default:t(()=>[a(l(g),{value:s.management.defaultRateLimit,"onUpdate:value":e[33]||(e[33]=o=>s.management.defaultRateLimit=o),placeholder:"0表示不限制",min:0,style:{width:"100%"}},{suffix:t(()=>e[102]||(e[102]=[c(" 次/分钟 ")])),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),a(l(Y),{name:"memory",tab:"记忆配置"},{default:t(()=>[a(l(y),{class:"inner-card mb-4"},{header:t(()=>e[103]||(e[103]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 基础配置 "),n("div",{class:"card-subtitle"}," 配置记忆系统的基础参数 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:r},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"数据库路径",path:"database"},{default:t(()=>[a(l(p),{value:r.database,"onUpdate:value":e[34]||(e[34]=o=>r.database=o),placeholder:"data/memory.db"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"向量维度",path:"vectorDimensions"},{default:t(()=>[a(l(g),{value:r.vectorDimensions,"onUpdate:value":e[35]||(e[35]=o=>r.vectorDimensions=o),min:0,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(y),{class:"inner-card mb-4"},{header:t(()=>e[104]||(e[104]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 群组记忆配置 "),n("div",{class:"card-subtitle"}," 配置群组事实记忆的提取和检索参数 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:r.group},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"启用群组记忆",path:"enable"},{default:t(()=>[a(l($),{value:r.group.enable,"onUpdate:value":e[36]||(e[36]=o=>r.group.enable=o)},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"启用的群组",path:"enabledGroups"},{default:t(()=>[a(l(U),{value:r.group.enabledGroups,"onUpdate:value":e[37]||(e[37]=o=>r.group.enabledGroups=o),placeholder:"输入群组ID并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"提取模型",path:"extractionModel"},{default:t(()=>[a(l(p),{value:r.group.extractionModel,"onUpdate:value":e[38]||(e[38]=o=>r.group.extractionModel=o),placeholder:"模型名称"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"提取预设ID",path:"extractionPresetId"},{default:t(()=>[a(l(z),{value:r.group.extractionPresetId,"onUpdate:value":e[39]||(e[39]=o=>r.group.extractionPresetId=o),options:V.value,filterable:"",placeholder:"选择预设",clearable:""},null,8,["value","options"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"最少消息数",path:"minMessageCount"},{default:t(()=>[a(l(g),{value:r.group.minMessageCount,"onUpdate:value":e[40]||(e[40]=o=>r.group.minMessageCount=o),min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"最大消息窗口",path:"maxMessageWindow"},{default:t(()=>[a(l(g),{value:r.group.maxMessageWindow,"onUpdate:value":e[41]||(e[41]=o=>r.group.maxMessageWindow=o),min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"历史轮询间隔(秒)",path:"historyPollInterval"},{default:t(()=>[a(l(g),{value:r.group.historyPollInterval,"onUpdate:value":e[42]||(e[42]=o=>r.group.historyPollInterval=o),min:0,style:{width:"100%"}},{suffix:t(()=>e[105]||(e[105]=[c(" 秒 ")])),_:1},8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"历史采样条数",path:"historyBatchSize"},{default:t(()=>[a(l(g),{value:r.group.historyBatchSize,"onUpdate:value":e[43]||(e[43]=o=>r.group.historyBatchSize=o),min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"检索模式",path:"retrievalMode"},{default:t(()=>[a(l(z),{value:r.group.retrievalMode,"onUpdate:value":e[44]||(e[44]=o=>r.group.retrievalMode=o),options:[{label:"向量检索",value:"vector"},{label:"关键词检索",value:"keyword"},{label:"混合检索",value:"hybrid"}]},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"混合检索优先",path:"hybridPrefer"},{default:t(()=>[a(l(z),{value:r.group.hybridPrefer,"onUpdate:value":e[45]||(e[45]=o=>r.group.hybridPrefer=o),options:[{label:"向量优先",value:"vector-first"},{label:"关键词优先",value:"keyword-first"}]},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"每次注入最多Facts数",path:"maxFactsPerInjection"},{default:t(()=>[a(l(g),{value:r.group.maxFactsPerInjection,"onUpdate:value":e[46]||(e[46]=o=>r.group.maxFactsPerInjection=o),min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"注入最低重要度",path:"minImportanceForInjection"},{default:t(()=>[a(l(g),{value:r.group.minImportanceForInjection,"onUpdate:value":e[47]||(e[47]=o=>r.group.minImportanceForInjection=o),min:0,max:1,step:.1,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"向量距离阈值",path:"vectorMaxDistance"},{default:t(()=>[a(l(g),{value:r.group.vectorMaxDistance,"onUpdate:value":e[48]||(e[48]=o=>r.group.vectorMaxDistance=o),min:0,step:.01,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"文本BM25阈值",path:"textMaxBm25Score"},{default:t(()=>[a(l(g),{value:r.group.textMaxBm25Score,"onUpdate:value":e[49]||(e[49]=o=>r.group.textMaxBm25Score=o),min:0,step:.1,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"Prompt标题模板",path:"promptHeader"},{default:t(()=>[a(l(p),{value:r.group.promptHeader,"onUpdate:value":e[50]||(e[50]=o=>r.group.promptHeader=o),type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"例如：# 群聊长期记忆"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"Prompt条目模板",path:"promptItemTemplate"},{default:t(()=>[a(l(p),{value:r.group.promptItemTemplate,"onUpdate:value":e[51]||(e[51]=o=>r.group.promptItemTemplate=o),type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"可使用占位符：${fact}、${topicSuffix}、${order}、${distance} 等"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"Prompt结束模板",path:"promptFooter"},{default:t(()=>[a(l(p),{value:r.group.promptFooter,"onUpdate:value":e[52]||(e[52]=o=>r.group.promptFooter=o),type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"可选"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(y),{class:"inner-card mb-4"},{header:t(()=>e[106]||(e[106]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 用户记忆配置 "),n("div",{class:"card-subtitle"}," 配置用户个性化记忆的提取参数 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:r.user},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"启用用户记忆",path:"enable"},{default:t(()=>[a(l($),{value:r.user.enable,"onUpdate:value":e[53]||(e[53]=o=>r.user.enable=o)},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"白名单用户",path:"whitelist"},{default:t(()=>[a(l(U),{value:r.user.whitelist,"onUpdate:value":e[54]||(e[54]=o=>r.user.whitelist=o),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"黑名单用户",path:"blacklist"},{default:t(()=>[a(l(U),{value:r.user.blacklist,"onUpdate:value":e[55]||(e[55]=o=>r.user.blacklist=o),placeholder:"输入用户ID并按回车添加"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"提取模型",path:"extractionModel"},{default:t(()=>[a(l(p),{value:r.user.extractionModel,"onUpdate:value":e[56]||(e[56]=o=>r.user.extractionModel=o),placeholder:"模型名称"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"提取预设ID",path:"extractionPresetId"},{default:t(()=>[a(l(z),{value:r.user.extractionPresetId,"onUpdate:value":e[57]||(e[57]=o=>r.user.extractionPresetId=o),options:V.value,filterable:"",placeholder:"选择预设",clearable:""},null,8,["value","options"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"每次注入最多条目数",path:"maxItemsPerInjection"},{default:t(()=>[a(l(g),{value:r.user.maxItemsPerInjection,"onUpdate:value":e[58]||(e[58]=o=>r.user.maxItemsPerInjection=o),min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"检索返回数量",path:"maxRelevantItemsPerQuery"},{default:t(()=>[a(l(g),{value:r.user.maxRelevantItemsPerQuery,"onUpdate:value":e[59]||(e[59]=o=>r.user.maxRelevantItemsPerQuery=o),min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"最低重要度",path:"minImportanceForInjection"},{default:t(()=>[a(l(g),{value:r.user.minImportanceForInjection,"onUpdate:value":e[60]||(e[60]=o=>r.user.minImportanceForInjection=o),min:0,max:1,step:.1,style:{width:"100%"}},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"Prompt标题模板",path:"promptHeader"},{default:t(()=>[a(l(p),{value:r.user.promptHeader,"onUpdate:value":e[61]||(e[61]=o=>r.user.promptHeader=o),type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"例如：# 用户画像"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"Prompt条目模板",path:"promptItemTemplate"},{default:t(()=>[a(l(p),{value:r.user.promptItemTemplate,"onUpdate:value":e[62]||(e[62]=o=>r.user.promptItemTemplate=o),type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"可使用占位符：${value}、${order}、${importance} 等"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"Prompt结束模板",path:"promptFooter"},{default:t(()=>[a(l(p),{value:r.user.promptFooter,"onUpdate:value":e[63]||(e[63]=o=>r.user.promptFooter=o),type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"可选"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(y),{class:"inner-card mb-4"},{header:t(()=>e[107]||(e[107]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 中文分词扩展（Simple） "),n("div",{class:"card-subtitle"}," 可选安装的 FTS5 中文 tokenizer，提升检索效果 ")],-1)])),default:t(()=>[a(l(ee),{vertical:"",size:16},{default:t(()=>[a(l(Ye),{"show-icon":"",type:"info"},{default:t(()=>e[108]||(e[108]=[c(" 该扩展来自 "),n("a",{href:"https://github.com/wangfenjin/simple",target:"_blank",rel:"noopener noreferrer"},"wangfenjin/simple",-1),c(" 项目， 用于提供中文和拼音分词能力。点击下方按钮自动下载，也可以手动填写库文件路径和词典目录。 ")])),_:1}),a(l(I),{"label-placement":"left","label-width":"auto",model:r.extensions.simple},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"启用扩展",path:"enable"},{default:t(()=>[a(l($),{value:r.extensions.simple.enable,"onUpdate:value":e[64]||(e[64]=o=>r.extensions.simple.enable=o)},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"使用结巴分词",path:"useJieba"},{default:t(()=>[a(l($),{value:r.extensions.simple.useJieba,"onUpdate:value":e[65]||(e[65]=o=>r.extensions.simple.useJieba=o)},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"库文件路径",path:"libraryPath"},{default:t(()=>[a(l(p),{value:r.extensions.simple.libraryPath,"onUpdate:value":e[66]||(e[66]=o=>r.extensions.simple.libraryPath=o),placeholder:"相对于插件目录或绝对路径，例如 resources/simple/linux-x64/libsimple.so"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"词典目录",path:"dictPath"},{default:t(()=>[a(l(p),{value:r.extensions.simple.dictPath,"onUpdate:value":e[67]||(e[67]=o=>r.extensions.simple.dictPath=o),placeholder:"可选，使用结巴分词时需要，例如 resources/simple/linux-x64/dict"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"]),a(l(I),{"label-placement":"left","label-width":"auto"},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"目标平台"},{default:t(()=>[a(l(z),{value:f.value,"onUpdate:value":e[68]||(e[68]=o=>f.value=o),options:M},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"自定义文件名"},{default:t(()=>[a(l(p),{value:m.value,"onUpdate:value":e[69]||(e[69]=o=>m.value=o),placeholder:"可选，例如 libsimple-osx-x64.zip"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:" "},{default:t(()=>[a(l(ee),null,{default:t(()=>[a(l(J),{type:"primary",loading:L.value,onClick:se},{default:t(()=>e[109]||(e[109]=[c(" 下载扩展 ")])),_:1},8,["loading"]),a(l(J),{loading:R.value,onClick:K},{default:t(()=>e[110]||(e[110]=[c(" 刷新状态 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),n("div",Il,[a(l(ee),{align:"center",wrap:""},{default:t(()=>[e[116]||(e[116]=n("span",null,"当前状态：",-1)),b.value?.loaded?(k(),Q(l(q),{key:0,type:"success"},{default:t(()=>e[111]||(e[111]=[c("已加载")])),_:1})):b.value?.enabled?(k(),Q(l(q),{key:1,type:"warning"},{default:t(()=>e[112]||(e[112]=[c("等待加载")])),_:1})):(k(),Q(l(q),{key:2,type:"default"},{default:t(()=>e[113]||(e[113]=[c("未启用")])),_:1})),b.value?.libraryExists?(k(),Q(l(q),{key:3,type:"success"},{default:t(()=>e[114]||(e[114]=[c("库文件存在")])),_:1})):(k(),Q(l(q),{key:4,type:"error"},{default:t(()=>e[115]||(e[115]=[c("库文件缺失")])),_:1})),r.extensions.simple.useJieba?(k(),Q(l(q),{key:5,type:b.value?.dictExists?"success":"warning"},{default:t(()=>[c(" 词典"+N(b.value?.dictExists?"可用":"缺失"),1)]),_:1},8,["type"])):ve("",!0)]),_:1}),n("div",Pl,[n("div",null," 库文件："+N(b.value?.resolvedLibraryPath||"未配置"),1),n("div",null," 词典目录："+N(b.value?.resolvedDictPath||"未配置"),1),n("div",null," 服务器平台："+N(b.value?.platform||"未知")+" / "+N(b.value?.arch||""),1),b.value?.error?(k(),D("div",Ul,[a(l(q),{type:"error",size:"small"},{default:t(()=>[c(N(b.value.error),1)]),_:1})])):ve("",!0)])])]),_:1})]),_:1}),n("div",Ml,[a(l(ee),null,{default:t(()=>[a(l(J),{type:"primary",onClick:oe},{default:t(()=>e[117]||(e[117]=[c(" 保存记忆配置 ")])),_:1})]),_:1})]),a(l(y),{class:"inner-card",title:"说明"},{default:t(()=>[e[121]||(e[121]=n("p",null,"记忆功能配置通过独立的API接口管理（/api/memory/config）。",-1)),n("p",null,[e[119]||(e[119]=c(" 记忆数据的管理请前往 ")),a(ne,{to:"/memory"},{default:t(()=>e[118]||(e[118]=[c(" 记忆管理 ")])),_:1}),e[120]||(e[120]=c(" 页面。 "))])]),_:1})]),_:1}),a(l(Y),{name:"chaite",tab:"Chaite配置"},{default:t(()=>[a(l(y),{class:"inner-card mb-4"},{header:t(()=>e[122]||(e[122]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," 文件与目录 "),n("div",{class:"card-subtitle"}," 设置Chaite相关文件目录 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:s.chaite},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24 s:24 m:12",label:"数据目录",path:"dataDir"},{default:t(()=>[a(l(p),{value:s.chaite.dataDir,"onUpdate:value":e[70]||(e[70]=o=>s.chaite.dataDir=o),placeholder:"相对于插件目录"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"处理器目录",path:"processorsDirPath"},{default:t(()=>[a(l(p),{value:s.chaite.processorsDirPath,"onUpdate:value":e[71]||(e[71]=o=>s.chaite.processorsDirPath=o),placeholder:"相对于插件目录"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"工具目录",path:"toolsDirPath"},{default:t(()=>[a(l(p),{value:s.chaite.toolsDirPath,"onUpdate:value":e[72]||(e[72]=o=>s.chaite.toolsDirPath=o),placeholder:"相对于插件目录"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(l(y),{class:"inner-card"},{header:t(()=>e[123]||(e[123]=[n("div",{class:"card-header"},[n("div",{class:"card-title"}," API与管理面板 "),n("div",{class:"card-subtitle"}," 设置云端API和管理面板配置 ")],-1)])),default:t(()=>[a(l(I),{"label-placement":"left","label-width":"auto",model:s.chaite},{default:t(()=>[a(l(P),{cols:24,"x-gap":12,"y-gap":16},{default:t(()=>[a(l(i),{span:"24",label:"云端API URL",path:"cloudBaseUrl"},{default:t(()=>[a(l(p),{value:s.chaite.cloudBaseUrl,"onUpdate:value":e[73]||(e[73]=o=>s.chaite.cloudBaseUrl=o),placeholder:"输入云端API URL"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"云端API Key",path:"cloudApiKey"},{default:t(()=>[a(l(p),{value:s.chaite.cloudApiKey,"onUpdate:value":e[74]||(e[74]=o=>s.chaite.cloudApiKey=o),type:"password","show-password-on":"click",placeholder:"输入云端API Key"},null,8,["value"])]),_:1}),a(l(i),{span:"24",label:"认证密钥",path:"authKey"},{default:t(()=>[a(l(p),{value:s.chaite.authKey,"onUpdate:value":e[75]||(e[75]=o=>s.chaite.authKey=o),type:"password","show-password-on":"click",placeholder:"非必要勿修改"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"监听地址",path:"host"},{default:t(()=>[a(l(p),{value:s.chaite.host,"onUpdate:value":e[76]||(e[76]=o=>s.chaite.host=o),placeholder:"管理面板监听地址"},null,8,["value"])]),_:1}),a(l(i),{span:"24 s:24 m:12",label:"监听端口",path:"port"},{default:t(()=>[a(l(g),{value:s.chaite.port,"onUpdate:value":e[77]||(e[77]=o=>s.chaite.port=o),min:1,max:65535,style:{width:"100%"},placeholder:"输入监听端口"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["value"]),n("div",Sl,[a(l(ee),null,{default:t(()=>[a(l(J),{type:"primary",onClick:O},{default:t(()=>e[124]||(e[124]=[c(" 保存配置 ")])),_:1})]),_:1})])])])]),_:1})])}}}),Al=Ge(Rl,[["__scopeId","data-v-707795c3"]]);export{Al as default};
