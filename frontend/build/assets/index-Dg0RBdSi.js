import{_ as G}from"./add-one-DOvH_o_Z.js";import{d as V,L as A,M as C,r as p,v as D,b as F,o as L,w as o,e as t,y as R,u as a,E as U,O as E,B as u,g as y,P as Q,Q as j,z as P,a as q,p as _}from"./index-ODYIy7Xh.js";import{f as H,c as K,u as W,a as X}from"./processors-DT5IuDA-.js";import{_ as Y}from"./ProcessorFormModal.vue_vue_type_script_setup_true_lang-DrWZgYkD.js";import{_ as Z}from"./FormItem-Bn6KO6SV.js";import{N as ee,_ as te}from"./Grid-Bjr6q9HT.js";import{_ as oe}from"./FormItemGridItem-Ca-3zMXQ.js";import{N as ne}from"./DataTable-D5UReYxF.js";import"./index-hayCweZy.js";import"./Checkbox-COyVwk_5.js";import"./Ellipsis-CB8MjzQA.js";import"./prop-BjyUHhTu.js";import"./download-C2161hUv.js";const ae={class:"flex gap-4"},ke=V({__name:"index",setup(se){function b({upload:n,edit:e,remove:g}){return[{title:"ID",key:"id",resizable:!0},{title:"名称",key:"name",render(l){return _("div",{},l.name)},resizable:!0},{title:"类型",key:"type",width:100},{title:"描述",key:"description",width:500},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(l){return[_(u,{type:"primary",strong:!0,tertiary:!0,size:"small",onClick:()=>n(l)},{default:()=>"上传"}),_(u,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(l)},{default:()=>"修改"}),_(u,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>g(l)},{default:()=>"删除"})]}}]}const f=A(),k=C({value:[]}),c=p(!1),d=p(!1),N={modelType:"settings",name:"",code:"",description:"",uploader:void 0},v=p(JSON.parse(JSON.stringify(N))),s=p(!1);function r(n){s.value=!0,H(n).then(e=>{k.value=e.data,s.value=!1}).catch(()=>{s.value=!1})}function w(n){window.$dialog.warning({title:"确认删除",content:`确定要删除处理器 "${n.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{X(n.id).then(e=>{e.code===0&&(f.success("删除成功"),r())}).finally(()=>s.value=!1)}})}function x(n){s.value=!0,K(n).then(e=>{e.code===0&&(f.success(d.value?"修改成功":"创建成功"),r())}).finally(()=>{s.value=!1,c.value=!1})}const z=b({upload(n){W(n).then(e=>{e.code===0&&(f.success("上传成功"),r())})},edit(n){d.value=!0,v.value={...n},c.value=!0},remove:w});function S(){d.value=!1,v.value=JSON.parse(JSON.stringify(N)),c.value=!0}D(()=>{r()});const i=C({name:void 0});function M(){i.name=void 0,r(i)}return(n,e)=>{const g=U,l=oe,B=Q,O=j,T=te,I=Z,h=R,J=G,$=ne;return L(),F(a(P),{vertical:"",size:"large"},{default:o(()=>[t(h,null,{default:o(()=>[t(I,{model:i,"label-placement":"left",inline:"","show-feedback":!1},{default:o(()=>[t(a(ee),{cols:"1 s:2 m:3 l:6","x-gap":12,"y-gap":16,responsive:"screen","item-responsive":""},{default:o(()=>[t(l,{span:"1",label:"名称",path:"name"},{default:o(()=>[t(g,{value:i.name,"onUpdate:value":e[0]||(e[0]=m=>i.name=m),placeholder:"请输入要搜索的名称关键词"},null,8,["value"])]),_:1}),t(T,{span:"1"},{default:o(()=>[t(a(E),{class:"ml-auto"},{default:o(()=>[t(a(u),{type:"primary",onClick:e[1]||(e[1]=m=>r(i))},{icon:o(()=>[t(B)]),default:o(()=>[e[3]||(e[3]=y(" 搜索 "))]),_:1}),t(a(u),{strong:"",secondary:"",onClick:M},{icon:o(()=>[t(O)]),default:o(()=>[e[4]||(e[4]=y(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(h,null,{default:o(()=>[t(a(P),{vertical:"",size:"large"},{default:o(()=>[q("div",ae,[t(a(u),{type:"primary",onClick:S},{icon:o(()=>[t(J)]),default:o(()=>[e[5]||(e[5]=y(" 新建处理器 "))]),_:1})]),t($,{columns:a(z),data:k.value,loading:s.value},null,8,["columns","data","loading"])]),_:1})]),_:1}),t(Y,{show:c.value,"onUpdate:show":e[2]||(e[2]=m=>c.value=m),"edit-mode":d.value,"initial-data":v.value,onSubmit:x},null,8,["show","edit-mode","initial-data"])]),_:1})}}});export{ke as default};
