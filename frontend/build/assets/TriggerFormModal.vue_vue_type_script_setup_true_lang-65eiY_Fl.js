import{j as T,o as V}from"./index-CeFBXiHy.js";import{d as h,r as g,aH as U,s as c,x as b,b as D,n as j,o as q,u as t,J as S,w as o,e as l,a as E,E as y,C as R,V as z,g as i,B as m,z as A,t as F,y as G}from"./index-CJIWqxBN.js";import{_ as H}from"./FormItem-CDsgx_ab.js";import{N as I}from"./Grid-DmeNHOJx.js";import{_ as d}from"./FormItemGridItem-CEbJWTJd.js";const J={style:{display:"flex","justify-content":"flex-end","margin-top":"24px"}},p=`// 触发器示例代码
export default {
  // 触发条件
  condition(ctx) {
    // 返回 true 表示触发，false 表示不触发
    return true
  },

  // 触发动作
  action(ctx) {
    // 在这里编写触发后的动作
    console.log('触发器已执行')
    return true
  }
}`,Q=h({__name:"TriggerFormModal",props:{show:Boolean,editMode:Boolean,initialData:{type:Object,default:()=>({})}},emits:["update:show","submit"],setup(x,{emit:w}){const u=x,v=w,f=g(null),_=T(),C=U(),r=c({get:()=>u.show,set:s=>v("update:show",s)}),a=g({modelType:"settings",name:"",code:p,description:"",status:"enabled",once:!1}),k=c(()=>u.editMode?"修改触发器":"新建触发器"),N={name:{required:!0,trigger:["blur","input"],message:"请输入名称"},code:{required:!0,trigger:["blur","input"],message:"请输入触发器代码"},status:{required:!0,trigger:["blur","change"],message:"请选择状态"}};function B(){if(!a.value.code||a.value.code.trim()===""){a.value.code=p;return}C.warning({title:"确认覆盖",content:"当前编辑区已有代码，插入示例代码将覆盖现有内容，是否继续？",positiveText:"确认",negativeText:"取消",onPositiveClick:()=>{a.value.code=p}})}b(()=>u.initialData,s=>{u.show&&s&&(a.value={...s})},{immediate:!0});function M(){f.value?.validate().then(s=>{if(Array.isArray(s)){console.error(s);return}v("submit",a.value)})}return b(r,s=>{!s&&!u.editMode&&(a.value={modelType:"settings",name:"",code:p,description:"",status:"enabled",once:!1})}),(s,e)=>r.value?(q(),D(t(S),{key:0,show:r.value,"onUpdate:show":e[6]||(e[6]=n=>r.value=n),preset:"card",style:{width:"800px","max-width":"90vw"}},{default:o(()=>[l(t(G),{title:k.value},{default:o(()=>[l(t(H),{ref_key:"formRef",ref:f,model:a.value,rules:N},{default:o(()=>[l(t(I),{cols:24,"x-gap":12,"y-gap":16,responsive:"screen","item-responsive":""},{default:o(()=>[l(t(d),{span:"24",label:"名称",path:"name"},{default:o(()=>[l(t(y),{value:a.value.name,"onUpdate:value":e[0]||(e[0]=n=>a.value.name=n),placeholder:"请输入触发器名称"},null,8,["value"])]),_:1}),l(t(d),{span:"24",label:"描述",path:"description"},{default:o(()=>[l(t(y),{value:a.value.description,"onUpdate:value":e[1]||(e[1]=n=>a.value.description=n),type:"textarea",placeholder:"请输入触发器描述"},null,8,["value"])]),_:1}),l(t(d),{span:"12",label:"状态",path:"status"},{default:o(()=>[l(t(R),{value:a.value.status,"onUpdate:value":e[2]||(e[2]=n=>a.value.status=n),options:[{label:"启用",value:"enabled"},{label:"禁用",value:"disabled"}]},null,8,["value"])]),_:1}),l(t(d),{span:"12",label:"一次性触发",path:"once"},{default:o(()=>[l(t(z),{value:a.value.once,"onUpdate:value":e[3]||(e[3]=n=>a.value.once=n)},{checked:o(()=>e[7]||(e[7]=[i("是")])),unchecked:o(()=>e[8]||(e[8]=[i("否")])),_:1},8,["value"])]),_:1}),l(t(d),{span:"24",label:"代码",path:"code"},{label:o(()=>[e[10]||(e[10]=i(" 代码 ")),l(t(m),{quaternary:"",type:"warning",style:{"font-size":"12px"},onClick:B},{default:o(()=>e[9]||(e[9]=[i(" 点击插入示例代码 ")])),_:1})]),default:o(()=>[l(t(V),{modelValue:a.value.code,"onUpdate:modelValue":e[4]||(e[4]=n=>a.value.code=n),style:{width:"100%"},lang:t(_),basic:""},null,8,["modelValue","lang"])]),_:1})]),_:1}),E("div",J,[l(t(A),null,{default:o(()=>[l(t(m),{onClick:e[5]||(e[5]=n=>r.value=!1)},{default:o(()=>e[11]||(e[11]=[i(" 取消 ")])),_:1}),l(t(m),{type:"primary",onClick:M},{default:o(()=>[i(F(u.editMode?"保存修改":"创建"),1)]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])):j("",!0)}});export{Q as _};
