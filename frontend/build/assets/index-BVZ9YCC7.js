import{_ as te}from"./add-one-BO6jQjy6.js";import{d as ae,L as oe,M as G,r as i,v as le,b as ne,o as se,w as l,e as t,y as ie,u as s,E as ue,O as B,B as u,g as h,P as re,Q as de,Z as ce,$ as pe,z as S,a as L,p as n,R as A,N as P}from"./index-B99eYF-c.js";import{f as me,c as fe,u as _e,a as ve}from"./tools-7Gln2vTW.js";import{_ as ge}from"./ToolFormModal.vue_vue_type_script_setup_true_lang-DB-HL-6u.js";import{f as ye,c as ke,d as be}from"./toolGroup-Bdlzh2pd.js";import{_ as he}from"./ToolGroupFormModal.vue_vue_type_script_setup_true_lang-r36eDhW6.js";import{I as Te}from"./cloudy-hcwjZGS9.js";import{_ as Ne}from"./FormItem-Cx4Hdy7_.js";import{N as Ce,_ as ze}from"./Grid-C58T3vDH.js";import{_ as Ge}from"./FormItemGridItem-mgwSNAov.js";import{N as Se}from"./DataTable-DdouVm27.js";import"./index-CNqADcXj.js";import"./Checkbox-DOmsmejg.js";import"./Ellipsis-D2J4j-Av.js";import"./prop-BjyUHhTu.js";import"./download-C2161hUv.js";const xe={class:"flex gap-4"},Ie={class:"flex gap-4"},je=ae({__name:"index",setup(we){function R({upload:a,edit:e,remove:g}){return[{title:"ID",key:"id",resizable:!0},{title:"云端ID",key:"cloudId",resizable:!0},{title:"名称",key:"name",render(o){const b=[o.name];return o.uploader&&b.push(n(A,{trigger:"hover"},{trigger:()=>n(Te,{style:{color:"green"}}),default:()=>"云端工具"})),n(B,{align:"center"},{default:()=>b})},resizable:!0},{title:"状态",key:"status",render(o){return o.status==="disabled"?n(A,{trigger:"hover"},{trigger:n(P,{type:"error"},{default:()=>"禁用"}),default:()=>"已禁用，不会被任何工具组使用"}):n(P,{type:"success"},{default:()=>"正常"})}},{title:"描述",key:"description",width:500},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(o){return[n(u,{type:"primary",strong:!0,tertiary:!0,size:"small",onClick:()=>a(o),disabled:o.uploader?.username},{default:()=>"上传"}),n(u,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(o)},{default:()=>"修改"}),n(u,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>g(o)},{default:()=>"删除"})]}}]}function U({_upload:a,edit:e,remove:g}){return[{title:"ID",key:"id",resizable:!0},{title:"组名称",key:"name",render(o){return n("div",{},o.name)},resizable:!0},{title:"描述",key:"description",width:500},{title:"工具数量",key:"toolCount",render(o){return n("div",{},o.isDefault?"-":o.toolIds?.length||0)}},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(o){return[n(u,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(o),disabled:o.isDefault},{default:()=>"修改"}),n(u,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>g(o),disabled:o.isDefault},{default:()=>"删除"})]}}]}const m=oe(),T=G({value:[]}),f=i(!1),y=i(!1),x={modelType:"settings",name:"",code:"",description:"",uploader:void 0},N=i(JSON.parse(JSON.stringify(x))),c=i(!1),I=G({value:[]}),_=i(!1),k=i(!1),w={name:"",description:"",toolIds:[],modelType:"settings",embedded:!1},C=i(JSON.parse(JSON.stringify(w))),r=i(!1),O=i("tools");function v(a){c.value=!0,me(a).then(e=>{T.value=e.data,c.value=!1}).catch(()=>{c.value=!1})}function V(a){window.$dialog.warning({title:"确认删除",content:`确定要删除工具 "${a.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{ve(a.id).then(e=>{e.code===0&&(m.success("删除成功"),v())}).finally(()=>c.value=!1)}})}function F(a){c.value=!0,fe(a).then(e=>{e.code===0&&(m.success(y.value?"修改成功":"创建成功"),v())}).finally(()=>{c.value=!1,f.value=!1})}const E=R({upload(a){_e(a).then(e=>{e.code===0&&m.success("上传成功")})},edit(a){y.value=!0,N.value={...a},f.value=!0},remove:V});function Q(){y.value=!1,N.value=JSON.parse(JSON.stringify(x)),f.value=!0}function z(a){r.value=!0,ye(a).then(e=>{I.value=e.data,r.value=!1}).catch(()=>{r.value=!1})}function Z(a){window.$dialog.warning({title:"确认删除",content:`确定要删除工具组 "${a.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{r.value=!0,be(a.id).then(e=>{e.code===0&&(m.success("删除成功"),z())}).finally(()=>r.value=!1)}})}function j(a){r.value=!0,ke(a).then(e=>{e.code===0&&(m.success(k.value?"修改成功":"创建成功"),z())}).finally(()=>{r.value=!1,_.value=!1})}const q=U({edit(a){k.value=!0,C.value={...a},_.value=!0},remove:Z});function H(){k.value=!1,C.value=JSON.parse(JSON.stringify(w)),_.value=!0}le(()=>{v(),z()});const p=G({name:void 0});function K(){p.name=void 0,v(p)}return(a,e)=>{const g=ue,o=Ge,b=re,W=de,X=ze,Y=Ne,D=ie,J=te,M=Se,$=pe,ee=ce;return se(),ne(s(S),{vertical:"",size:"large"},{default:l(()=>[t(D,null,{default:l(()=>[t(Y,{model:p,"label-placement":"left",inline:"","show-feedback":!1},{default:l(()=>[t(s(Ce),{cols:"1 s:2 m:3 l:6","x-gap":12,"y-gap":16,responsive:"screen","item-responsive":""},{default:l(()=>[t(o,{span:"1",label:"名称",path:"name"},{default:l(()=>[t(g,{value:p.name,"onUpdate:value":e[0]||(e[0]=d=>p.name=d),placeholder:"请输入要搜索的名称关键词"},null,8,["value"])]),_:1}),t(X,{span:"1"},{default:l(()=>[t(s(B),{class:"ml-auto"},{default:l(()=>[t(s(u),{type:"primary",onClick:e[1]||(e[1]=d=>v(p))},{icon:l(()=>[t(b)]),default:l(()=>[e[5]||(e[5]=h(" 搜索 "))]),_:1}),t(s(u),{strong:"",secondary:"",onClick:K},{icon:l(()=>[t(W)]),default:l(()=>[e[6]||(e[6]=h(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(D,null,{default:l(()=>[t(ee,{value:O.value,"onUpdate:value":e[2]||(e[2]=d=>O.value=d),type:"line",animated:""},{default:l(()=>[t($,{name:"tools",tab:"工具管理"},{default:l(()=>[t(s(S),{vertical:"",size:"large"},{default:l(()=>[L("div",xe,[t(s(u),{type:"primary",onClick:Q},{icon:l(()=>[t(J)]),default:l(()=>[e[7]||(e[7]=h(" 新建工具 "))]),_:1})]),t(M,{columns:s(E),data:T.value,loading:c.value},null,8,["columns","data","loading"])]),_:1})]),_:1}),t($,{name:"groups",tab:"工具组管理"},{default:l(()=>[t(s(S),{vertical:"",size:"large"},{default:l(()=>[L("div",Ie,[t(s(u),{type:"primary",onClick:H},{icon:l(()=>[t(J)]),default:l(()=>[e[8]||(e[8]=h(" 新建工具组 "))]),_:1})]),t(M,{columns:s(q),data:I.value,loading:r.value},null,8,["columns","data","loading"])]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(ge,{show:f.value,"onUpdate:show":e[3]||(e[3]=d=>f.value=d),"edit-mode":y.value,"initial-data":N.value,onSubmit:F},null,8,["show","edit-mode","initial-data"]),t(he,{show:_.value,"onUpdate:show":e[4]||(e[4]=d=>_.value=d),"edit-mode":k.value,"initial-data":C.value,"available-tools":T.value,onSubmit:j},null,8,["show","edit-mode","initial-data","available-tools"])]),_:1})}}});export{je as default};
