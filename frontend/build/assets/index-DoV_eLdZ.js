import{_ as te,a as ae}from"./add-one-8AM-ZTV3.js";import{d as oe,am as ne,an as G,r as u,F as le,b as se,o as ue,w as n,e as t,ac as ie,u as s,ah as re,ao as B,B as i,g as h,ap as de,aq as ce,ay as pe,az as me,ad as S,a as A,x as l,ar as L,ab as U}from"./index-BjEaegUP.js";import{f as fe,c as _e,u as ve,a as ge}from"./tools-CUahZ1c2.js";import{_ as ye}from"./ToolFormModal.vue_vue_type_script_setup_true_lang-Bs_7Gb-r.js";import{f as ke,c as be,d as he}from"./toolGroup-BnOFbQC0.js";import{_ as Te}from"./ToolGroupFormModal.vue_vue_type_script_setup_true_lang-CgR0Vzxr.js";import{I as Ce}from"./cloudy-CVZ16pF9.js";import{_ as Ne}from"./FormItem-CbOKjIWi.js";import{N as ze,_ as Ge}from"./Grid-o2FxrQJs.js";import{_ as Se}from"./FormItemGridItem-CSIse2iU.js";import"./Checkbox-CirA8Os6.js";import"./Ellipsis-BscbUQ8T.js";import"./prop-BjyUHhTu.js";import"./index-CYcWqdD7.js";const xe={class:"flex gap-4"},Ie={class:"flex gap-4"},je=oe({__name:"index",setup(we){function F({upload:a,edit:e,remove:g}){return[{title:"ID",key:"id",resizable:!0},{title:"云端ID",key:"cloudId",resizable:!0},{title:"名称",key:"name",render(o){const b=[o.name];return o.uploader&&b.push(l(L,{trigger:"hover"},{trigger:()=>l(Ce,{style:{color:"green"}}),default:()=>"云端工具"})),l(B,{align:"center"},{default:()=>b})},resizable:!0},{title:"状态",key:"status",render(o){return o.status==="disabled"?l(L,{trigger:"hover"},{trigger:l(U,{type:"error"},{default:()=>"禁用"}),default:()=>"已禁用，不会被任何工具组使用"}):l(U,{type:"success"},{default:()=>"正常"})}},{title:"描述",key:"description",width:500},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(o){return[l(i,{type:"primary",strong:!0,tertiary:!0,size:"small",onClick:()=>a(o),disabled:o.uploader?.username},{default:()=>"上传"}),l(i,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(o)},{default:()=>"修改"}),l(i,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>g(o)},{default:()=>"删除"})]}}]}function P({_upload:a,edit:e,remove:g}){return[{title:"ID",key:"id",resizable:!0},{title:"组名称",key:"name",render(o){return l("div",{},o.name)},resizable:!0},{title:"描述",key:"description",width:500},{title:"工具数量",key:"toolCount",render(o){return l("div",{},o.isDefault?"-":o.toolIds?.length||0)}},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(o){return[l(i,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(o),disabled:o.isDefault},{default:()=>"修改"}),l(i,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>g(o),disabled:o.isDefault},{default:()=>"删除"})]}}]}const m=ne(),T=G({value:[]}),f=u(!1),y=u(!1),x={modelType:"settings",name:"",code:"",description:"",uploader:void 0},C=u(JSON.parse(JSON.stringify(x))),c=u(!1),I=G({value:[]}),_=u(!1),k=u(!1),w={name:"",description:"",toolIds:[],modelType:"settings",embedded:!1},N=u(JSON.parse(JSON.stringify(w))),r=u(!1),J=u("tools");function v(a){c.value=!0,fe(a).then(e=>{T.value=e.data,c.value=!1}).catch(()=>{c.value=!1})}function R(a){window.$dialog.warning({title:"确认删除",content:`确定要删除工具 "${a.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{ge(a.id).then(e=>{e.code===0&&(m.success("删除成功"),v())}).finally(()=>c.value=!1)}})}function V(a){c.value=!0,_e(a).then(e=>{e.code===0&&(m.success(y.value?"修改成功":"创建成功"),v())}).finally(()=>{c.value=!1,f.value=!1})}const q=F({upload(a){ve(a).then(e=>{e.code===0&&m.success("上传成功")})},edit(a){y.value=!0,C.value={...a},f.value=!0},remove:R});function j(){y.value=!1,C.value=JSON.parse(JSON.stringify(x)),f.value=!0}function z(a){r.value=!0,ke(a).then(e=>{I.value=e.data,r.value=!1}).catch(()=>{r.value=!1})}function E(a){window.$dialog.warning({title:"确认删除",content:`确定要删除工具组 "${a.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{r.value=!0,he(a.id).then(e=>{e.code===0&&(m.success("删除成功"),z())}).finally(()=>r.value=!1)}})}function H(a){r.value=!0,be(a).then(e=>{e.code===0&&(m.success(k.value?"修改成功":"创建成功"),z())}).finally(()=>{r.value=!1,_.value=!1})}const K=P({edit(a){k.value=!0,N.value={...a},_.value=!0},remove:E});function Q(){k.value=!1,N.value=JSON.parse(JSON.stringify(w)),_.value=!0}le(()=>{v(),z()});const p=G({name:void 0});function W(){p.name=void 0,v(p)}return(a,e)=>{const g=re,o=Se,b=de,X=ce,Y=Ge,Z=Ne,O=ie,D=te,M=ae,$=me,ee=pe;return ue(),se(s(S),{vertical:"",size:"large"},{default:n(()=>[t(O,null,{default:n(()=>[t(Z,{model:p,"label-placement":"left",inline:"","show-feedback":!1},{default:n(()=>[t(s(ze),{cols:"1 s:2 m:3 l:6","x-gap":12,"y-gap":16,responsive:"screen","item-responsive":""},{default:n(()=>[t(o,{span:"1",label:"名称",path:"name"},{default:n(()=>[t(g,{value:p.name,"onUpdate:value":e[0]||(e[0]=d=>p.name=d),placeholder:"请输入要搜索的名称关键词"},null,8,["value"])]),_:1}),t(Y,{span:"1"},{default:n(()=>[t(s(B),{class:"ml-auto"},{default:n(()=>[t(s(i),{type:"primary",onClick:e[1]||(e[1]=d=>v(p))},{icon:n(()=>[t(b)]),default:n(()=>[e[5]||(e[5]=h(" 搜索 "))]),_:1}),t(s(i),{strong:"",secondary:"",onClick:W},{icon:n(()=>[t(X)]),default:n(()=>[e[6]||(e[6]=h(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(O,null,{default:n(()=>[t(ee,{value:J.value,"onUpdate:value":e[2]||(e[2]=d=>J.value=d),type:"line",animated:""},{default:n(()=>[t($,{name:"tools",tab:"工具管理"},{default:n(()=>[t(s(S),{vertical:"",size:"large"},{default:n(()=>[A("div",xe,[t(s(i),{type:"primary",onClick:j},{icon:n(()=>[t(D)]),default:n(()=>[e[7]||(e[7]=h(" 新建工具 "))]),_:1})]),t(M,{columns:s(q),data:T.value,loading:c.value},null,8,["columns","data","loading"])]),_:1})]),_:1}),t($,{name:"groups",tab:"工具组管理"},{default:n(()=>[t(s(S),{vertical:"",size:"large"},{default:n(()=>[A("div",Ie,[t(s(i),{type:"primary",onClick:Q},{icon:n(()=>[t(D)]),default:n(()=>[e[8]||(e[8]=h(" 新建工具组 "))]),_:1})]),t(M,{columns:s(K),data:I.value,loading:r.value},null,8,["columns","data","loading"])]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(ye,{show:f.value,"onUpdate:show":e[3]||(e[3]=d=>f.value=d),"edit-mode":y.value,"initial-data":C.value,onSubmit:V},null,8,["show","edit-mode","initial-data"]),t(Te,{show:_.value,"onUpdate:show":e[4]||(e[4]=d=>_.value=d),"edit-mode":k.value,"initial-data":N.value,"available-tools":T.value,onSubmit:H},null,8,["show","edit-mode","initial-data","available-tools"])]),_:1})}}});export{je as default};
