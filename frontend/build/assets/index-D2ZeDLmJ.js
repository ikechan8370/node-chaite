import{_ as V}from"./add-one-DdEKtC9E.js";import{p as N,d as q,q as A,s as b,r as m,v as P,b as R,o as U,w as n,e as t,y as E,u as a,z as L,N as j,B as u,g as k,C as H,D as K,E as x,a as Q,F as f}from"./index-CucaxZT9.js";import{_ as W}from"./ToolFormModal.vue_vue_type_script_setup_true_lang-Bn7YusvT.js";import{_ as X}from"./FormItem-Dc6zS2Y0.js";import{N as Y,_ as Z}from"./Grid-KISfveeX.js";import{_ as ee}from"./FormItemGridItem-Dp7BRbUe.js";import{_ as te}from"./DataTable-DNEbLQCY.js";import"./monaco-editor-vue3-BUUYNnSl.js";import"./Checkbox-D1L79b_W.js";import"./Radio-RTfkllD3.js";import"./RadioGroup-B2AZpoS6.js";import"./Ellipsis-BisKcmIj.js";import"./Pagination-DRiwVTMo.js";import"./prop-BjyUHhTu.js";function ne(i){return N.Get("/api/tools/list",{params:i})}function oe(i){return N.Post("/api/tools/",i)}function ae(i){return N.Delete(`/api/tools/${i}`)}const le={class:"flex gap-4"},Ne=q({__name:"index",setup(i){function z({test:o,edit:e,remove:y}){return[{title:"ID",key:"id",resizable:!0},{title:"名称",key:"name",render(s){return f("div",{},s.name)},resizable:!0},{title:"描述",key:"description",width:500},{title:"创建日期",key:"createdAt",resizable:!0},{title:"操作",key:"actions",render(s){return[f(u,{type:"primary",strong:!0,tertiary:!0,size:"small",onClick:()=>o(s)},{default:()=>"测试"}),f(u,{type:"info",strong:!0,tertiary:!0,size:"small",onClick:()=>e(s)},{default:()=>"修改"}),f(u,{type:"error",strong:!0,tertiary:!0,size:"small",onClick:()=>y(s)},{default:()=>"删除"})]}}]}const v=A(),h=b({value:[]}),c=m(!1),d=m(!1),T={modelType:"settings",name:"",code:"",description:"",uploader:void 0},g=m(JSON.parse(JSON.stringify(T))),l=m(!1);function _(o){l.value=!0,ne(o).then(e=>{h.value=e.data,l.value=!1}).catch(()=>{l.value=!1})}function w(o){window.$dialog.warning({title:"确认删除",content:`确定要删除工具 "${o.name}" 吗？此操作不可恢复`,positiveText:"确认删除",onPositiveClick:()=>{ae(o.id).then(e=>{e.code===0&&(v.success("删除成功"),_())}).finally(()=>l.value=!1)}})}function S(o){l.value=!0,oe(o).then(e=>{e.code===0&&(v.success(d.value?"修改成功":"创建成功"),_())}).finally(()=>{l.value=!1,c.value=!1})}const $=z({test(o){v.success(`测试工具: ${o.name}`)},edit(o){d.value=!0,g.value={...o},c.value=!0},remove:w});function B(){d.value=!1,g.value=JSON.parse(JSON.stringify(T)),c.value=!0}P(()=>{_()});const r=b({name:void 0});function M(){r.name=void 0,_(r)}return(o,e)=>{const y=L,s=ee,G=H,I=K,J=Z,O=X,C=E,D=V,F=te;return U(),R(a(x),{vertical:"",size:"large"},{default:n(()=>[t(C,null,{default:n(()=>[t(O,{model:r,"label-placement":"left",inline:"","show-feedback":!1},{default:n(()=>[t(a(Y),{cols:"1 s:2 m:3 l:6","x-gap":12,"y-gap":16,responsive:"screen","item-responsive":""},{default:n(()=>[t(s,{span:"1",label:"名称",path:"name"},{default:n(()=>[t(y,{value:r.name,"onUpdate:value":e[0]||(e[0]=p=>r.name=p),placeholder:"请输入要搜索的名称关键词"},null,8,["value"])]),_:1}),t(J,{span:"1"},{default:n(()=>[t(a(j),{class:"ml-auto"},{default:n(()=>[t(a(u),{type:"primary",onClick:e[1]||(e[1]=p=>_(r))},{icon:n(()=>[t(G)]),default:n(()=>[e[3]||(e[3]=k(" 搜索 "))]),_:1}),t(a(u),{strong:"",secondary:"",onClick:M},{icon:n(()=>[t(I)]),default:n(()=>[e[4]||(e[4]=k(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(C,null,{default:n(()=>[t(a(x),{vertical:"",size:"large"},{default:n(()=>[Q("div",le,[t(a(u),{type:"primary",onClick:B},{icon:n(()=>[t(D)]),default:n(()=>[e[5]||(e[5]=k(" 新建工具 "))]),_:1})]),t(F,{columns:a($),data:h.value,loading:l.value},null,8,["columns","data","loading"])]),_:1})]),_:1}),t(W,{show:c.value,"onUpdate:show":e[2]||(e[2]=p=>c.value=p),"edit-mode":d.value,"initial-data":g.value,onSubmit:S},null,8,["show","edit-mode","initial-data"])]),_:1})}}});export{Ne as default};
