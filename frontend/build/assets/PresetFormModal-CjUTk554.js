import{d as P,r as y,s as I,G as M,c as h,o as U,e,u as t,ak as k,w as a,ac as B,a as A,ah as v,ad as b,ar as f,af as g,B as d,g as i,k as C}from"./index-BjEaegUP.js";import{_ as G}from"./FormItem-CbOKjIWi.js";import{N as x}from"./Grid-o2FxrQJs.js";import{_ as n}from"./FormItemGridItem-CSIse2iU.js";import{N as q}from"./InputNumber-D6dFsLSZ.js";import{N as R,a as z}from"./CollapseItem-Bl978HYL.js";const T={style:{display:"flex","justify-content":"flex-end","margin-top":"24px"}},$=P({__name:"PresetFormModal",props:{show:Boolean,editMode:Boolean,initialData:{type:Object,default:()=>({})},preProcessorOptions:{type:Array,default:()=>[]},postProcessorOptions:{type:Array,default:()=>[]},toolsOptions:{type:Array,default:()=>[]}},emits:["update:show","submit"],setup(u,{emit:w}){const m=u,O=w,_=y(),p=I({get:()=>m.show,set:r=>O("update:show",r)}),c={name:{required:!0,trigger:["blur","input"],message:"请输入预设名称"},description:{required:!0,trigger:["blur","change"],message:"请选择客户端类型"},prefix:{required:!0,trigger:["blur","input"],message:"请输入基础URL"},"sendMessageOption.model":{required:!0,trigger:["blur","input"],message:"请输入模型"}},l=y({modelType:"settings",name:"",embedded:!1,description:"",sendMessageOption:{systemOverride:"",temperature:.6,model:"",toolGroupId:["default_local"]},prefix:"",local:!0});M(()=>m.initialData,r=>{m.editMode&&r&&(l.value={...r})},{immediate:!0});function N(){_.value?.validate().then(r=>{if(Array.isArray(r)){console.error(r);return}O("submit",l.value),p.value=!1})}return M(p,r=>{!r&&!m.editMode&&(l.value={modelType:"settings",name:"",embedded:!1,description:"",sendMessageOption:{systemOverride:"",temperature:.6,model:"",toolGroupId:["default_local"]},prefix:"",local:!0})}),(r,s)=>(U(),h("div",null,[e(t(k),{show:p.value,"onUpdate:show":s[9]||(s[9]=o=>p.value=o),preset:"card",style:{width:"700px","max-width":"90vw"}},{default:a(()=>[e(t(B),{title:u.editMode?"编辑预设":"添加预设"},{default:a(()=>[e(t(G),{ref_key:"formRef",ref:_,rules:c,model:l.value},{default:a(()=>[e(t(x),{cols:24,"x-gap":12,"y-gap":16,responsive:"self","item-responsive":""},{default:a(()=>[e(t(n),{span:"12 s:8 m:4",label:"名称",path:"name"},{default:a(()=>[e(t(v),{value:l.value.name,"onUpdate:value":s[0]||(s[0]=o=>l.value.name=o),placeholder:"请输入预设名称"},null,8,["value"])]),_:1}),e(t(n),{span:"12 s:8 m:4",label:"前缀",path:"prefix"},{default:a(()=>[e(t(v),{value:l.value.prefix,"onUpdate:value":s[1]||(s[1]=o=>l.value.prefix=o),placeholder:"请输入前缀"},null,8,["value"])]),_:1}),e(t(n),{span:"12 s:8 m:4",label:"模型",path:"sendMessageOption.model"},{default:a(()=>[e(t(v),{value:l.value.sendMessageOption.model,"onUpdate:value":s[2]||(s[2]=o=>l.value.sendMessageOption.model=o),placeholder:"请输入模型"},null,8,["value"])]),_:1}),e(t(n),{span:"12 s:8 m:4",label:"温度",path:"sendMessageOption.temperature"},{default:a(()=>[e(t(q),{value:l.value.sendMessageOption.temperature,"onUpdate:value":s[3]||(s[3]=o=>l.value.sendMessageOption.temperature=o),placeholder:"请输入温度"},null,8,["value"])]),_:1}),e(t(n),{span:"24",label:"模型",path:"sendMessageOption.systemOverride"},{default:a(()=>[e(t(v),{value:l.value.sendMessageOption.systemOverride,"onUpdate:value":s[4]||(s[4]=o=>l.value.sendMessageOption.systemOverride=o),type:"textarea",placeholder:"请输入提示词"},null,8,["value"])]),_:1})]),_:1}),e(t(R),{class:"mt-4"},{default:a(()=>[e(t(z),{title:"高级设置",name:"advanced"},{default:a(()=>[e(t(x),{cols:24,"x-gap":12,"y-gap":16,responsive:"screen","item-responsive":""},{default:a(()=>[e(t(n),{span:"24 s:12 m:8",label:"处理器",path:"processors"},{default:a(()=>[e(t(b),null,{default:a(()=>[e(t(f),{trigger:"hover",placement:"bottom",width:260},{trigger:a(()=>[e(t(d),{size:"small"},{default:a(()=>s[10]||(s[10]=[i(" 前处理器 ")])),_:1})]),default:a(()=>[e(t(g),{value:l.value.sendMessageOption.preProcessorIds,"onUpdate:value":s[5]||(s[5]=o=>l.value.sendMessageOption.preProcessorIds=o),multiple:"",placeholder:"请选择前处理器",options:u.preProcessorOptions},null,8,["value","options"])]),_:1}),e(t(f),{trigger:"hover",placement:"bottom",width:260},{trigger:a(()=>[e(t(d),{size:"small"},{default:a(()=>s[11]||(s[11]=[i(" 后处理器 ")])),_:1})]),default:a(()=>[e(t(g),{value:l.value.sendMessageOption.postProcessorIds,"onUpdate:value":s[6]||(s[6]=o=>l.value.sendMessageOption.postProcessorIds=o),multiple:"",placeholder:"请选择后处理器",options:u.postProcessorOptions},null,8,["value","options"])]),_:1})]),_:1})]),_:1}),e(t(n),{span:"24 s:12 m:8",label:"工具",path:"tools"},{default:a(()=>[e(t(f),{trigger:"hover",placement:"bottom",width:260},{trigger:a(()=>[e(t(d),{size:"small"},{default:a(()=>s[12]||(s[12]=[i(" 工具组 ")])),_:1})]),default:a(()=>[e(t(g),{value:l.value.sendMessageOption.toolGroupId,"onUpdate:value":s[7]||(s[7]=o=>l.value.sendMessageOption.toolGroupId=o),multiple:"",placeholder:"请选择工具组",options:u.toolsOptions},null,8,["value","options"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),A("div",T,[e(t(b),null,{default:a(()=>[e(t(d),{onClick:s[8]||(s[8]=o=>p.value=!1)},{default:a(()=>s[13]||(s[13]=[i(" 取消 ")])),_:1}),e(t(d),{type:"primary",onClick:N},{default:a(()=>s[14]||(s[14]=[i(" 确定 ")])),_:1})]),_:1})])]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])]))}}),S=C($,[["__scopeId","data-v-5f0536e0"]]);export{S as default};
